"use strict";(self.webpackChunkangular_application=self.webpackChunkangular_application||[]).push([[5952],{5913:(A,f,l)=>{l.d(f,{I:()=>o,K:()=>Z});var c=l(639);let o=(()=>{class s{constructor(){this._printStyle=[],this.useExistingCss=!1,this.printDelay=0,this._styleSheetFile=""}set printStyle(i){for(let t in i)i.hasOwnProperty(t)&&this._printStyle.push((t+JSON.stringify(i[t])).replace(/['"]+/g,""));this.returnStyleValues()}returnStyleValues(){return`<style> ${this._printStyle.join(" ").replace(/,/g,";")} </style>`}set styleSheetFile(i){let t=function(r){return`<link rel="stylesheet" type="text/css" href="${r}">`};if(-1!==i.indexOf(",")){const r=i.split(",");for(let u of r)this._styleSheetFile=this._styleSheetFile+t(u)}else this._styleSheetFile=t(i)}returnStyleSheetLinkTags(){return this._styleSheetFile}getElementTag(i){const t=[],r=document.getElementsByTagName(i);for(let u=0;u<r.length;u++)t.push(r[u].outerHTML);return t.join("\r\n")}getFormData(i){for(var t=0;t<i.length;t++)i[t].defaultValue=i[t].value,i[t].checked&&(i[t].defaultChecked=!0)}getHtmlContents(){let i=document.getElementById(this.printSectionId),t=i.getElementsByTagName("input");this.getFormData(t);let r=i.getElementsByTagName("textarea");return this.getFormData(r),i.innerHTML}print(){let i,t,r="",u="";const p=this.getElementTag("base");this.useExistingCss&&(r=this.getElementTag("style"),u=this.getElementTag("link")),i=this.getHtmlContents(),t=window.open("","_blank","top=0,left=0,height=auto,width=auto"),t.document.open(),t.document.write(`\n      <html>\n        <head>\n          <title>${this.printTitle?this.printTitle:""}</title>\n          ${p}\n          ${this.returnStyleValues()}\n          ${this.returnStyleSheetLinkTags()}\n          ${r}\n          ${u}\n        </head>\n        <body>\n          ${i}\n          <script defer>\n            function triggerPrint(event) {\n              window.removeEventListener('load', triggerPrint, false);\n              setTimeout(function() {\n                closeWindow(window.print());\n              }, ${this.printDelay});\n            }\n            function closeWindow(){\n                window.close();\n            }\n            window.addEventListener('load', triggerPrint, false);\n          <\/script>\n        </body>\n      </html>`),t.document.close()}}return s.\u0275fac=function(i){return new(i||s)},s.\u0275dir=c.lG2({type:s,selectors:[["button","ngxPrint",""]],hostBindings:function(i,t){1&i&&c.NdJ("click",function(){return t.print()})},inputs:{useExistingCss:"useExistingCss",printDelay:"printDelay",printStyle:"printStyle",styleSheetFile:"styleSheetFile",printSectionId:"printSectionId",printTitle:"printTitle"}}),s})(),Z=(()=>{class s{}return s.\u0275fac=function(i){return new(i||s)},s.\u0275mod=c.oAB({type:s}),s.\u0275inj=c.cJS({imports:[[]]}),s})()},5952:(A,f,l)=>{l.r(f),l.d(f,{GlobalLedgerModule:()=>E});var c=l(8583),o=l(4466),Z=l(665),s=l(5913),g=l(6901),i=l(4762),t=l(639),r=l(4495),u=l(5620),p=l(1841),T=l(1879);function y(n,_){1&n&&t._UZ(0,"div",10)}function b(n,_){if(1&n&&(t.TgZ(0,"div",13),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" No record found on financial year ",e.fin_year,". ")}}function U(n,_){if(1&n&&(t.TgZ(0,"tr"),t._UZ(1,"td"),t._UZ(2,"td"),t._UZ(3,"td"),t._UZ(4,"td"),t._UZ(5,"td"),t._UZ(6,"td"),t._UZ(7,"td"),t.TgZ(8,"td"),t._uU(9,"Opening balance:"),t.qZA(),t.TgZ(10,"td",18),t._uU(11),t.ALo(12,"number"),t.qZA(),t._UZ(13,"td"),t.qZA()),2&n){const e=t.oxw(3);t.xp6(11),t.Oqu(t.lcZ(12,1,e.opening_balance))}}function q(n,_){if(1&n&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.ALo(7,"date"),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.ALo(16,"number"),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.ALo(19,"number"),t.qZA(),t.TgZ(20,"td"),t._uU(21),t.ALo(22,"number"),t.qZA(),t.TgZ(23,"td"),t._uU(24),t.ALo(25,"uppercase"),t.qZA(),t.qZA()),2&n){const e=_.$implicit,h=_.index;t.xp6(2),t.Oqu(h+1),t.xp6(2),t.Oqu(e.system),t.xp6(2),t.Oqu(t.xi3(7,10,e.date,"dd-MM-yyyy")),t.xp6(3),t.Oqu(e.reference_no),t.xp6(2),t.Oqu(e.from_name),t.xp6(2),t.Oqu(e.to_name),t.xp6(2),t.Oqu(t.lcZ(16,13,e.credit)),t.xp6(3),t.Oqu(t.lcZ(19,15,e.debit)),t.xp6(3),t.Oqu(t.lcZ(22,17,e.balance)),t.xp6(3),t.Oqu(t.lcZ(25,19,e.purpose))}}function x(n,_){if(1&n&&(t.TgZ(0,"div"),t.TgZ(1,"div",14),t.TgZ(2,"table",15),t._UZ(3,"caption"),t.TgZ(4,"thead"),t.TgZ(5,"tr"),t.TgZ(6,"th",16),t._uU(7,"SL."),t.qZA(),t.TgZ(8,"th",16),t._uU(9,"System"),t.qZA(),t.TgZ(10,"th",16),t._uU(11,"Date"),t.qZA(),t.TgZ(12,"th",16),t._uU(13,"Reference no."),t.qZA(),t.TgZ(14,"th",16),t._uU(15,"From"),t.qZA(),t.TgZ(16,"th",16),t._uU(17,"To"),t.qZA(),t.TgZ(18,"th",16),t._uU(19,"Credit(\u20b9)"),t.qZA(),t.TgZ(20,"th",16),t._uU(21,"Debit(\u20b9)"),t.qZA(),t.TgZ(22,"th",16),t._uU(23,"Balance(\u20b9)"),t.qZA(),t.TgZ(24,"th",16),t._uU(25,"Purpose"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(26,"tbody"),t.YNc(27,U,14,3,"tr",12),t.YNc(28,q,26,21,"tr",17),t.TgZ(29,"tr"),t._UZ(30,"td"),t._UZ(31,"td"),t._UZ(32,"td"),t._UZ(33,"td"),t._UZ(34,"td"),t.TgZ(35,"td"),t.TgZ(36,"strong"),t._uU(37,"Sub-total(\u20b9)"),t.qZA(),t.qZA(),t.TgZ(38,"td",18),t._uU(39),t.ALo(40,"number"),t.qZA(),t.TgZ(41,"td",18),t._uU(42),t.ALo(43,"number"),t.qZA(),t._UZ(44,"td"),t._UZ(45,"td"),t.qZA(),t.TgZ(46,"tr"),t._UZ(47,"td"),t._UZ(48,"td"),t._UZ(49,"td"),t._UZ(50,"td"),t._UZ(51,"td"),t.TgZ(52,"td",19),t.TgZ(53,"strong"),t._uU(54,"Total (\u20b9)"),t.qZA(),t.qZA(),t.TgZ(55,"td",18),t._uU(56),t.ALo(57,"number"),t.qZA(),t.TgZ(58,"td",18),t._uU(59),t.ALo(60,"number"),t.qZA(),t._UZ(61,"td"),t._UZ(62,"td"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&n){const e=t.oxw(2);t.xp6(27),t.Q6J("ngIf",0==e.opening_balance),t.xp6(1),t.Q6J("ngForOf",e.ledgers),t.xp6(11),t.Oqu(t.lcZ(40,6,e.totalCredit)),t.xp6(3),t.Oqu(t.lcZ(43,8,e.totalDebit)),t.xp6(14),t.Oqu(t.lcZ(57,10,e.total_credit)),t.xp6(3),t.Oqu(t.lcZ(60,12,e.total_debit))}}function C(n,_){if(1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"span"),t.TgZ(3,"strong"),t.TgZ(4,"label"),t._uU(5,"TRANSACTIONS"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"div"),t.YNc(7,b,2,1,"div",11),t.YNc(8,x,63,14,"div",12),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(7),t.Q6J("ngIf",0==e.ledgers.length),t.xp6(1),t.Q6J("ngIf",0!=e.ledgers.length)}}const M=[{path:"",component:(()=>{class n{constructor(e,h,v){this.layoutService=e,this.service=h,this.http=v,this.ledgerTable=!1,this.loader=!1,this.ledgers=[],this.loadTable=()=>(0,i.mG)(this,void 0,void 0,function*(){this.loader=!0;let m=yield this.service.get("/accountant/allLedgers?dist_id="+this.dist_id+"&fin_year="+this.fin_year);this.ledgers=m,console.log(this.ledgers,"ledgers");let d=m;this.opening_balance=0,this.totalCredit=0,this.totalDebit=0,d.filter(a=>a.date=new Date(a.date)),d.sort((a,O)=>a.date-O.date);for(let a=0;a<d.length;a++)d[a].to=="DS-"+this.dist_id?(d[a].credit=d[a].ammount,d[a].debit=0,this.totalCredit+=parseFloat(d[a].credit)):d[a].from=="DS-"+this.dist_id&&(d[a].debit=d[a].ammount,d[a].credit=0,this.totalDebit+=parseFloat(d[a].debit)),d[a].balance=0==a?parseFloat(d[a].credit)-parseFloat(d[a].debit):parseFloat(d[a-1].balance)+parseFloat(d[a].credit)-parseFloat(d[a].debit);this.total_credit=this.totalCredit,this.total_debit=this.totalDebit,this.loader=!1,this.ledgerTable=!0}),this.sortedOrderOfColumn=m=>{this.orderBy=m},this.layoutService.setBreadcrumb("Ledger / Global ledger"),this.dist_id=e.getDistrictID()}ngOnInit(){}changeFinancialYear(e){this.fin_year=e,this.loadTable(),this.header=!0}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(r.P),t.Y36(u.v),t.Y36(p.eN))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-global"]],decls:21,vars:4,consts:[[1,"mybox"],[1,"mybox-header"],[1,"middle"],[1,"row"],[1,"col-lg-3"],[3,"newItemEvent"],["type","date",1,"form-control",3,"ngModel","ngModelChange"],[1,"loader"],["class","spinner-border text-info",4,"ngIf"],["class","mybox",4,"ngIf"],[1,"spinner-border","text-info"],["class","no-record",4,"ngIf"],[4,"ngIf"],[1,"no-record"],[1,"table-responsive"],["id","orderListTable",1,"table","table-striped","table-bordered","table-hover"],["scope","col"],[4,"ngFor","ngForOf"],[2,"width","12%"],[2,"text-align","right"]],template:function(e,h){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"span"),t.TgZ(3,"strong"),t.TgZ(4,"label"),t._uU(5,"LEDGER"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"div",2),t.TgZ(7,"div",3),t.TgZ(8,"div",4),t.TgZ(9,"app-financial-year",5),t.NdJ("newItemEvent",function(m){return h.changeFinancialYear(m)}),t.qZA(),t.qZA(),t.TgZ(10,"div",4),t.TgZ(11,"label"),t._uU(12,"From date:"),t.qZA(),t.TgZ(13,"input",6),t.NdJ("ngModelChange",function(m){return h.fromDate=m}),t.qZA(),t.qZA(),t.TgZ(14,"div",4),t.TgZ(15,"label"),t._uU(16,"To date:"),t.qZA(),t.TgZ(17,"input",6),t.NdJ("ngModelChange",function(m){return h.toDate=m}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",7),t.YNc(19,y,1,0,"div",8),t.qZA(),t.YNc(20,C,9,2,"div",9)),2&e&&(t.xp6(13),t.Q6J("ngModel",h.fromDate),t.xp6(4),t.Q6J("ngModel",h.toDate),t.xp6(2),t.Q6J("ngIf",h.loader),t.xp6(1),t.Q6J("ngIf",h.ledgerTable))},directives:[T.L,Z.Fj,Z.JJ,Z.On,c.O5,c.sg],pipes:[c.JJ,c.uU,c.gd],styles:[""]}),n})()}];let D=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[g.Bz.forChild(M)],g.Bz]}),n})(),E=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[c.ez,o.m,Z.u5,s.K,D]]}),n})()},1879:(A,f,l)=>{l.d(f,{L:()=>t});var c=l(4762),o=l(639),Z=l(5620),s=l(665),g=l(8583);function i(r,u){if(1&r&&(o.TgZ(0,"option",3),o._uU(1),o.qZA()),2&r){const p=u.$implicit;o.Q6J("ngValue",p),o.xp6(1),o.Oqu(p)}}let t=(()=>{class r{constructor(p){this.service=p,this.financialYear="",this.financialYearList=[],this.newItemEvent=new o.vpe,this.loadFinancialYear=()=>(0,c.mG)(this,void 0,void 0,function*(){this.financialYearList=yield this.service.get("/api/getFinYear"),this.financialYear=this.financialYearList[0],this.changeFinancialYear()}),this.loadFinancialYear()}ngOnInit(){}changeFinancialYear(){this.newItemEvent.emit(this.financialYear)}}return r.\u0275fac=function(p){return new(p||r)(o.Y36(Z.v))},r.\u0275cmp=o.Xpm({type:r,selectors:[["app-financial-year"]],outputs:{newItemEvent:"newItemEvent"},decls:6,vars:2,consts:[[1,"form-control",3,"ngModel","ngModelChange","change"],["value","","disabled",""],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"]],template:function(p,T){1&p&&(o.TgZ(0,"label"),o._uU(1,"Financial year :"),o.qZA(),o.TgZ(2,"select",0),o.NdJ("ngModelChange",function(b){return T.financialYear=b})("change",function(){return T.changeFinancialYear()}),o.TgZ(3,"option",1),o._uU(4,"--Select--"),o.qZA(),o.YNc(5,i,2,2,"option",2),o.qZA()),2&p&&(o.xp6(2),o.Q6J("ngModel",T.financialYear),o.xp6(3),o.Q6J("ngForOf",T.financialYearList))},directives:[s.EJ,s.JJ,s.On,s.YN,s.Kr,g.sg],styles:[""]}),r})()},4466:(A,f,l)=>{l.d(f,{m:()=>s});var c=l(8583),o=l(665),Z=l(639);let s=(()=>{class g{}return g.\u0275fac=function(t){return new(t||g)},g.\u0275mod=Z.oAB({type:g}),g.\u0275inj=Z.cJS({imports:[[c.ez,o.u5]]}),g})()}}]);