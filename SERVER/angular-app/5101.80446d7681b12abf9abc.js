"use strict";(self.webpackChunkangular_application=self.webpackChunkangular_application||[]).push([[5101],{5913:(y,f,o)=>{o.d(f,{I:()=>a,K:()=>c});var u=o(639);let a=(()=>{class r{constructor(){this._printStyle=[],this.useExistingCss=!1,this.printDelay=0,this._styleSheetFile=""}set printStyle(n){for(let t in n)n.hasOwnProperty(t)&&this._printStyle.push((t+JSON.stringify(n[t])).replace(/['"]+/g,""));this.returnStyleValues()}returnStyleValues(){return`<style> ${this._printStyle.join(" ").replace(/,/g,";")} </style>`}set styleSheetFile(n){let t=function(s){return`<link rel="stylesheet" type="text/css" href="${s}">`};if(-1!==n.indexOf(",")){const s=n.split(",");for(let h of s)this._styleSheetFile=this._styleSheetFile+t(h)}else this._styleSheetFile=t(n)}returnStyleSheetLinkTags(){return this._styleSheetFile}getElementTag(n){const t=[],s=document.getElementsByTagName(n);for(let h=0;h<s.length;h++)t.push(s[h].outerHTML);return t.join("\r\n")}getFormData(n){for(var t=0;t<n.length;t++)n[t].defaultValue=n[t].value,n[t].checked&&(n[t].defaultChecked=!0)}getHtmlContents(){let n=document.getElementById(this.printSectionId),t=n.getElementsByTagName("input");this.getFormData(t);let s=n.getElementsByTagName("textarea");return this.getFormData(s),n.innerHTML}print(){let n,t,s="",h="";const v=this.getElementTag("base");this.useExistingCss&&(s=this.getElementTag("style"),h=this.getElementTag("link")),n=this.getHtmlContents(),t=window.open("","_blank","top=0,left=0,height=auto,width=auto"),t.document.open(),t.document.write(`\n      <html>\n        <head>\n          <title>${this.printTitle?this.printTitle:""}</title>\n          ${v}\n          ${this.returnStyleValues()}\n          ${this.returnStyleSheetLinkTags()}\n          ${s}\n          ${h}\n        </head>\n        <body>\n          ${n}\n          <script defer>\n            function triggerPrint(event) {\n              window.removeEventListener('load', triggerPrint, false);\n              setTimeout(function() {\n                closeWindow(window.print());\n              }, ${this.printDelay});\n            }\n            function closeWindow(){\n                window.close();\n            }\n            window.addEventListener('load', triggerPrint, false);\n          <\/script>\n        </body>\n      </html>`),t.document.close()}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275dir=u.lG2({type:r,selectors:[["button","ngxPrint",""]],hostBindings:function(n,t){1&n&&u.NdJ("click",function(){return t.print()})},inputs:{useExistingCss:"useExistingCss",printDelay:"printDelay",printStyle:"printStyle",styleSheetFile:"styleSheetFile",printSectionId:"printSectionId",printTitle:"printTitle"}}),r})(),c=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=u.oAB({type:r}),r.\u0275inj=u.cJS({imports:[[]]}),r})()},5101:(y,f,o)=>{o.r(f),o.d(f,{ReportModule:()=>R});var u=o(8583),a=o(4466),c=o(665),r=o(5913),l=o(6901),n=o(4762),t=o(639),s=o(4495),h=o(5620),v=o(1841),T=o(9344),C=o(1879),M=o(1410);function E(i,d){if(1&i&&(t.TgZ(0,"option",16),t._uU(1),t.qZA()),2&i){const e=d.$implicit;t.Q6J("ngValue",e),t.xp6(1),t.hij(" ",e.LegalBussinessName," ")}}function F(i,d){if(1&i){const e=t.EpF();t.TgZ(0,"div",4),t.TgZ(1,"div",5),t.TgZ(2,"span"),t.TgZ(3,"strong"),t.TgZ(4,"label"),t._uU(5,"Vendor Payment Report"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"div",6),t.TgZ(7,"div",7),t.TgZ(8,"div",8),t.TgZ(9,"app-financial-year",9),t.NdJ("newItemEvent",function(m){return t.CHM(e),t.oxw().changeFinancialYear(m)}),t.qZA(),t.qZA(),t.TgZ(10,"div",8),t.TgZ(11,"label"),t._uU(12,"Vendors :"),t.qZA(),t.TgZ(13,"select",10),t.NdJ("ngModelChange",function(m){return t.CHM(e),t.oxw().dealer=m})("change",function(){return t.CHM(e),t.oxw().loadApprovalListByDealer()}),t.TgZ(14,"option",11),t._uU(15,"ALL"),t.qZA(),t.YNc(16,E,2,2,"option",12),t.qZA(),t.qZA(),t.TgZ(17,"div",8),t.TgZ(18,"label"),t._uU(19,"Report type :"),t.qZA(),t.TgZ(20,"select",10),t.NdJ("ngModelChange",function(m){return t.CHM(e),t.oxw().approval_status=m})("change",function(){return t.CHM(e),t.oxw().loadApprovalListByStatus()}),t.TgZ(21,"option",11),t._uU(22,"ALL"),t.qZA(),t.TgZ(23,"option",13),t._uU(24,"Pending at DM"),t.qZA(),t.TgZ(25,"option",14),t._uU(26,"Approved by DM & Pending at BANK"),t.qZA(),t.TgZ(27,"option",15),t._uU(28,"Confirmed by BANK"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(13),t.Q6J("ngModel",e.dealer),t.xp6(3),t.Q6J("ngForOf",e.dealer_list),t.xp6(4),t.Q6J("ngModel",e.approval_status)}}function q(i,d){1&i&&t._UZ(0,"div",17)}function D(i,d){if(1&i&&(t.TgZ(0,"div",19),t._uU(1),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.hij(" No record found on financial year ",e.fin_year,". ")}}function P(i,d){if(1&i){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.ALo(9,"date"),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.ALo(14,"number"),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td"),t.TgZ(18,"button",24),t.NdJ("click",function(){const Z=t.CHM(e).$implicit;return t.oxw(3).showApproval(Z)}),t._UZ(19,"i",25),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=d.$implicit,g=d.index;t.xp6(2),t.Oqu(g+1),t.xp6(2),t.Oqu(e.approval_id),t.xp6(2),t.Oqu(e.pp_id),t.xp6(2),t.Oqu(t.xi3(9,7,e.approval_date,"dd-MM-yyyy")),t.xp6(3),t.Oqu(e.invoice_no),t.xp6(2),t.Oqu(t.lcZ(14,10,e.approval_amount)),t.xp6(3),t.Oqu(e.status_desc)}}function U(i,d){if(1&i&&(t.TgZ(0,"div"),t.TgZ(1,"div",20),t.TgZ(2,"table",21),t._UZ(3,"caption"),t.TgZ(4,"thead"),t.TgZ(5,"tr"),t.TgZ(6,"th",22),t._uU(7,"SL."),t.qZA(),t.TgZ(8,"th",22),t._uU(9,"Approval ID"),t.qZA(),t.TgZ(10,"th",22),t._uU(11,"Part payment ID"),t.qZA(),t.TgZ(12,"th",22),t._uU(13,"Approval date"),t.qZA(),t.TgZ(14,"th",22),t._uU(15,"Invoice no."),t.qZA(),t.TgZ(16,"th",22),t._uU(17,"Amount"),t.qZA(),t.TgZ(18,"th",22),t._uU(19,"Status"),t.qZA(),t.TgZ(20,"th",22),t._uU(21,"View Approval"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(22,"tbody"),t.YNc(23,P,20,12,"tr",23),t.ALo(24,"search"),t.ALo(25,"search"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(23),t.Q6J("ngForOf",t.xi3(24,1,t.xi3(25,4,e.approval_list,e.approval_status),e.dealer.dl_id))}}function w(i,d){if(1&i&&(t.TgZ(0,"div",4),t.TgZ(1,"div",5),t.TgZ(2,"span"),t.TgZ(3,"strong"),t.TgZ(4,"label"),t._uU(5,"APPROVAL LIST"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"div"),t.YNc(7,D,2,1,"div",18),t.YNc(8,U,26,7,"div",3),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(7),t.Q6J("ngIf",0==e.approval_list.length),t.xp6(1),t.Q6J("ngIf",0!==e.approval_list.length)}}function b(i,d){if(1&i){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"button",26),t.NdJ("click",function(){return t.CHM(e),t.oxw().back()}),t._UZ(2,"i",27),t._uU(3," Back"),t.qZA(),t.TgZ(4,"div",4),t.TgZ(5,"div",5),t.TgZ(6,"span"),t.TgZ(7,"strong"),t.TgZ(8,"label"),t._uU(9,"APPROVAL"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(10,"div"),t._uU(11," <%- include('../common/dealer_pay_approval.ejs') -%> "),t.TgZ(12,"div",28),t.TgZ(13,"button",29),t.NdJ("click",function(){return t.CHM(e),t.oxw().back()}),t._UZ(14,"i",27),t._uU(15," Back"),t.qZA(),t.TgZ(16,"button",30),t._uU(17,"Print "),t._UZ(18,"i",31),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}}const I=[{path:"",component:(()=>{class i{constructor(e,g,m,Z){this.layoutService=e,this.service=g,this.http=m,this.toastr=Z,this.dealer={},this.show_approval_list=!0,this.show_approval_print=!1,this.loader=!1,this.approval_list=[],this.loadDealers=()=>(0,n.mG)(this,void 0,void 0,function*(){this.loader=!0;let A=yield this.service.get("/accountant/getAllDistWiseDelear?fin_year="+this.fin_year+"&dist_id="+this.dist_id);this.dealer_list=A,this.loader=!1}),this.loadInvoiceListByFinYearWise=()=>(0,n.mG)(this,void 0,void 0,function*(){this.loader=!0;const A=yield this.service.get("/accountant/getFinYearWiseApprovalList?fin_year="+this.fin_year+"&dist_id="+this.dist_id);this.approval_list=A,this.loader=!1,this.show_approval_list=!0}),this.loadApprovalListByDealer=()=>{},this.loadApprovalListByStatus=()=>{},this.showApproval=A=>(0,n.mG)(this,void 0,void 0,function*(){this.show_approval_list=!1,this.show_approval_print=!0,this.loader=!0;try{let x=yield this.service.get("/accountant/getApprovalDetail?approval_id="+A.approval_id),_=x.aprDetail;this.invoice_no=_.invoice_no,this.indent_no=_.indent_no,this.invoice_date=new Date(_.invoice_date),this.indent_date=new Date(_.indent_date),this.indent_amount=_.indent_ammount,this.invoice_amount=_.invoice_ammount,this.remark=_.remark,this.paid_amount=_.paid_amount,this.deduction_amount=_.deduction_amount,this.pay_now=_.pay_now_amount,this.selected_dl_id=_.dl_id,this.subTotal=_.full_amount,this.dl={dl_name:_.LegalBussinessName,dl_address:_.dl_address,bank_name:_.bank_name,dl_ac_no:_.dl_ac_no,dl_ifsc_code:_.dl_ifsc_code,dl_mobile_no:_.dl_mobile_no,dl_email:_.dl_email},this.less_cgst=0,this.less_sgst=0,this.invoice_items=Enumerable.From(x.apprItems).GroupBy(p=>p.implement&&p.make&&p.model).Select(p=>(p.source[0].quantity=p.source.length,p.source[0])).ToArray(),this.invoice_items.forEach(p=>{p.taxableValue=parseInt(p.quantity)*parseFloat(p.p_taxable_value),this.less_cgst=parseFloat(this.less_cgst)+parseInt(p.quantity)*parseFloat(p.p_cgst_1),this.less_sgst=parseFloat(this.less_sgst)+parseInt(p.quantity)*parseFloat(p.p_sgst_1),p.invoiceValue=parseInt(p.quantity)*parseFloat(p.p_invoice_value)}),this.loader=!1}catch(x){console.error(x.data),window.alert("Data can't fetch now. Please try again."),this.loader=!1}}),this.back=()=>{this.show_approval_print=!1,this.show_approval_list=!0},this.layoutService.setBreadcrumb("Vendor Pay / Report"),this.dist_id=e.getDistrictID()}ngOnInit(){}changeFinancialYear(e){this.fin_year=e,this.loadInvoiceListByFinYearWise(),this.loadDealers()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(s.P),t.Y36(h.v),t.Y36(v.eN),t.Y36(T._W))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-report"]],decls:5,vars:4,consts:[["class","mybox",4,"ngIf"],[1,"loader"],["class","spinner-border text-info",4,"ngIf"],[4,"ngIf"],[1,"mybox"],[1,"mybox-header"],[1,"middle"],[1,"row"],[1,"col-lg-4"],[3,"newItemEvent"],[1,"form-control",3,"ngModel","ngModelChange","change"],["value",""],[3,"ngValue",4,"ngFor","ngForOf"],["value","pending_at_dm"],["value","pending_at_bank"],["value","paid"],[3,"ngValue"],[1,"spinner-border","text-info"],["class","no-record",4,"ngIf"],[1,"no-record"],[1,"table-responsive"],["id","itemListTable",1,"table","table-striped","table-bordered","table-hover"],["scope","col"],[4,"ngFor","ngForOf"],[1,"btn","btn-outline-info","round",3,"click"],["aria-hidden","true",1,"fas","fa-bars"],[1,"btn","btn-info","btn-sm","topBack",3,"click"],["aria-hidden","true",1,"fas","fa-arrow-left"],[1,"bottomBack"],[1,"btn","btn-info","btn-sm",3,"click"],[1,"btn","btn-info","btn-sm"],["aria-hidden","true",1,"fas","fa-print"]],template:function(e,g){1&e&&(t.YNc(0,F,29,3,"div",0),t.TgZ(1,"div",1),t.YNc(2,q,1,0,"div",2),t.qZA(),t.YNc(3,w,9,2,"div",0),t.YNc(4,b,19,0,"div",3)),2&e&&(t.Q6J("ngIf",g.show_approval_list),t.xp6(2),t.Q6J("ngIf",g.loader),t.xp6(1),t.Q6J("ngIf",g.show_approval_list),t.xp6(1),t.Q6J("ngIf",g.show_approval_print))},directives:[u.O5,C.L,c.EJ,c.JJ,c.On,c.YN,c.Kr,u.sg],pipes:[M.G,u.uU,u.JJ],styles:[""]}),i})()}];let O=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[l.Bz.forChild(I)],l.Bz]}),i})(),R=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[u.ez,a.m,c.u5,r.K,O]]}),i})()},1879:(y,f,o)=>{o.d(f,{L:()=>t});var u=o(4762),a=o(639),c=o(5620),r=o(665),l=o(8583);function n(s,h){if(1&s&&(a.TgZ(0,"option",3),a._uU(1),a.qZA()),2&s){const v=h.$implicit;a.Q6J("ngValue",v),a.xp6(1),a.Oqu(v)}}let t=(()=>{class s{constructor(v){this.service=v,this.financialYear="",this.financialYearList=[],this.newItemEvent=new a.vpe,this.loadFinancialYear=()=>(0,u.mG)(this,void 0,void 0,function*(){this.financialYearList=yield this.service.get("/api/getFinYear"),this.financialYear=this.financialYearList[0],this.changeFinancialYear()}),this.loadFinancialYear()}ngOnInit(){}changeFinancialYear(){this.newItemEvent.emit(this.financialYear)}}return s.\u0275fac=function(v){return new(v||s)(a.Y36(c.v))},s.\u0275cmp=a.Xpm({type:s,selectors:[["app-financial-year"]],outputs:{newItemEvent:"newItemEvent"},decls:6,vars:2,consts:[[1,"form-control",3,"ngModel","ngModelChange","change"],["value","","disabled",""],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"]],template:function(v,T){1&v&&(a.TgZ(0,"label"),a._uU(1,"Financial year :"),a.qZA(),a.TgZ(2,"select",0),a.NdJ("ngModelChange",function(M){return T.financialYear=M})("change",function(){return T.changeFinancialYear()}),a.TgZ(3,"option",1),a._uU(4,"--Select--"),a.qZA(),a.YNc(5,n,2,2,"option",2),a.qZA()),2&v&&(a.xp6(2),a.Q6J("ngModel",T.financialYear),a.xp6(3),a.Q6J("ngForOf",T.financialYearList))},directives:[r.EJ,r.JJ,r.On,r.YN,r.Kr,l.sg],styles:[""]}),s})()},1410:(y,f,o)=>{o.d(f,{G:()=>a});var u=o(639);let a=(()=>{class c{transform(l,n){return l?n?(n=n.toLowerCase(),l.filter(function(t){return JSON.stringify(t).toLowerCase().includes(n)})):l:null}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275pipe=u.Yjl({name:"search",type:c,pure:!0}),c})()},4466:(y,f,o)=>{o.d(f,{m:()=>r});var u=o(8583),a=o(665),c=o(639);let r=(()=>{class l{}return l.\u0275fac=function(t){return new(t||l)},l.\u0275mod=c.oAB({type:l}),l.\u0275inj=c.cJS({imports:[[u.ez,a.u5]]}),l})()}}]);