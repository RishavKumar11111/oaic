"use strict";(self.webpackChunkangular_application=self.webpackChunkangular_application||[]).push([[2321],{2321:(I,p,a)=>{a.r(p),a.d(p,{PendingPaymentsModule:()=>M});var r=a(8583),g=a(6901),l=a(4762),t=a(639),m=a(5620),_=a(4495),u=a(9344),v=a(1879),c=a(665),T=a(231);function A(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"div",4),t.TgZ(1,"div",5),t.TgZ(2,"span"),t.TgZ(3,"strong"),t.TgZ(4,"label"),t._uU(5,"Confirm Payments"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"div",6),t.TgZ(7,"div",7),t.TgZ(8,"div",8),t.TgZ(9,"app-financial-year",9),t.NdJ("newItemEvent",function(s){return t.CHM(n),t.oxw().changeFinancialYear(s)}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}}function h(e,o){1&e&&t._UZ(0,"div",10)}function f(e,o){if(1&e&&(t.TgZ(0,"div",12),t._uU(1),t.qZA()),2&e){const n=t.oxw(2);t.xp6(1),t.hij(" No record found on financial year ",n.fin_year,". ")}}function y(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.ALo(9,"date"),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.ALo(12,"number"),t.qZA(),t.TgZ(13,"td"),t.TgZ(14,"button",19),t.NdJ("click",function(){const d=t.CHM(n).$implicit;return t.oxw(3).viewDetails(d)}),t._UZ(15,"i",20),t.qZA(),t.qZA(),t.TgZ(16,"td"),t.TgZ(17,"input",21),t.NdJ("ngModelChange",function(s){return t.CHM(n).$implicit.checkbox=s}),t.qZA(),t.qZA(),t.qZA()}if(2&e){const n=o.$implicit,i=o.index;t.xp6(2),t.Oqu(i+1),t.xp6(2),t.Oqu(n.approval_id),t.xp6(2),t.Oqu(n.pp_id),t.xp6(2),t.Oqu(t.xi3(9,6,n.approval_date,"dd-MM-yyyy")),t.xp6(3),t.Oqu(t.lcZ(12,9,n.pay_now_amount)),t.xp6(6),t.Q6J("ngModel",n.checkbox)}}function P(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"div",13),t.TgZ(2,"table",14),t._UZ(3,"caption"),t.TgZ(4,"thead"),t.TgZ(5,"tr"),t.TgZ(6,"th",15),t._uU(7,"SL."),t.qZA(),t.TgZ(8,"th",15),t._uU(9,"Approval ID"),t.qZA(),t.TgZ(10,"th",15),t._uU(11,"Part payment ID"),t.qZA(),t.TgZ(12,"th",15),t._uU(13,"Approval date"),t.qZA(),t.TgZ(14,"th",15),t._uU(15,"Amount"),t.qZA(),t.TgZ(16,"th",15),t._uU(17,"View Approval"),t.qZA(),t.TgZ(18,"th",15),t._uU(19,"Action"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(20,"tbody"),t.YNc(21,y,18,11,"tr",16),t.qZA(),t.qZA(),t.qZA(),t.TgZ(22,"div",17),t.TgZ(23,"button",18),t.NdJ("click",function(){return t.CHM(n),t.oxw(2).showApprovePayments()}),t._uU(24,"Proceed"),t.qZA(),t.qZA(),t.qZA()}if(2&e){const n=t.oxw(2);t.xp6(21),t.Q6J("ngForOf",n.pendingPaymentList)}}function q(e,o){if(1&e&&(t.TgZ(0,"div",4),t.TgZ(1,"div",5),t.TgZ(2,"span"),t.TgZ(3,"strong"),t.TgZ(4,"label"),t._uU(5,"Pending Payments"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"div"),t.YNc(7,f,2,1,"div",11),t.YNc(8,P,25,1,"div",3),t.qZA(),t.qZA()),2&e){const n=t.oxw();t.xp6(7),t.Q6J("ngIf",0==n.pendingPaymentList.length),t.xp6(1),t.Q6J("ngIf",0!=n.pendingPaymentList.length)}}function x(e,o){if(1&e&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.ALo(9,"date"),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.ALo(12,"number"),t.qZA(),t.qZA()),2&e){const n=o.$implicit,i=o.index;t.xp6(2),t.Oqu(i+1),t.xp6(2),t.Oqu(n.approval_id),t.xp6(2),t.Oqu(n.pp_id),t.xp6(2),t.Oqu(t.xi3(9,5,n.approval_date,"dd/MM/yyyy")),t.xp6(3),t.Oqu(t.lcZ(12,8,n.pay_now_amount))}}function b(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"button",22),t.NdJ("click",function(){return t.CHM(n),t.oxw().back()}),t._UZ(2,"i",23),t._uU(3," Back"),t.qZA(),t.TgZ(4,"div",4),t.TgZ(5,"div",5),t.TgZ(6,"span"),t.TgZ(7,"strong"),t.TgZ(8,"label"),t._uU(9,"Confirm"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(10,"div"),t.TgZ(11,"div"),t.TgZ(12,"div",13),t.TgZ(13,"table",14),t._UZ(14,"caption"),t.TgZ(15,"thead"),t.TgZ(16,"tr"),t.TgZ(17,"th",15),t._uU(18,"SL."),t.qZA(),t.TgZ(19,"th",15),t._uU(20,"Approval ID"),t.qZA(),t.TgZ(21,"th",15),t._uU(22,"Part payment ID"),t.qZA(),t.TgZ(23,"th",15),t._uU(24,"Approval Date"),t.qZA(),t.TgZ(25,"th",15),t._uU(26,"Amount"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(27,"tbody"),t.YNc(28,x,13,10,"tr",16),t.qZA(),t.qZA(),t.qZA(),t.TgZ(29,"div",24),t.TgZ(30,"button",18),t.NdJ("click",function(){return t.CHM(n),t.oxw().back()}),t._UZ(31,"i",23),t._uU(32," Back"),t.qZA(),t.TgZ(33,"button",18),t.NdJ("click",function(){return t.CHM(n),t.oxw().approvePayments()}),t._uU(34,"Confirm"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&e){const n=t.oxw();t.xp6(28),t.Q6J("ngForOf",n.selected_items)}}function C(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"button",25),t.NdJ("click",function(){return t.CHM(n),t.oxw().back()}),t._UZ(2,"i",23),t._uU(3," Back"),t.qZA(),t.TgZ(4,"div",4),t.TgZ(5,"div",5),t.TgZ(6,"span"),t.TgZ(7,"strong"),t.TgZ(8,"label"),t._uU(9,"APPROVAL"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(10,"div"),t._UZ(11,"app-vendor-payment-approval",26),t.TgZ(12,"div",24),t.TgZ(13,"button",18),t.NdJ("click",function(){return t.CHM(n),t.oxw().back()}),t._UZ(14,"i",23),t._uU(15," Back"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&e){const n=t.oxw();t.xp6(11),t.Q6J("selectedApproval",n.selectedApproval)}}const U=[{path:"",component:(()=>{class e{constructor(n,i,s){this.service=n,this.layoutService=i,this.toastr=s,this.selectedApproval="",this.showTable=!0,this.paymentInvoice=!1,this.approve=!1,this.loadingData=!1,this.fin_year="",this.fin_year_list=[],this.pendingPaymentList=[],this.selected_items=[],this.showPendingPayments=()=>(0,l.mG)(this,void 0,void 0,function*(){this.loadingData=!0;let d=yield this.service.get("/bank/getAllPaymentApprovals?fin_year="+this.fin_year);this.loadingData=!1,this.showTable=!0,this.pendingPaymentList=d}),this.viewDetails=d=>(0,l.mG)(this,void 0,void 0,function*(){this.selectedApproval=d,this.loadingData=!0,this.paymentInvoice=!0,this.showTable=!1,this.loadingData=!1}),this.showApprovePayments=()=>{this.totalAmmount=0,this.selected_items=this.pendingPaymentList.filter(d=>{if(d.checkbox)return d}),this.approve=!0,this.showTable=!1},this.approvePayments=()=>(0,l.mG)(this,void 0,void 0,function*(){try{this.loadingData=!0,this.approve=!1,yield this.service.post("/bank/confirmPayments",{approval_list:this.selected_items}),this.toastr.success("Successfully Confirmed the Payments.","200"),this.back(),this.showPendingPayments()}catch(d){window.alert("Server error. Please try again."),console.error(d),this.loadingData=!1,this.approve=!0}}),this.back=()=>{this.paymentInvoice=!1,this.showTable=!0,this.approve=!1},this.layoutService.setBreadcrumb("Confirm Pending Payments")}ngOnInit(){}changeFinancialYear(n){this.fin_year=n,this.showPendingPayments()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(m.v),t.Y36(_.P),t.Y36(u._W))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-pending-payments"]],decls:6,vars:5,consts:[["class","mybox",4,"ngIf"],[1,"loader"],["class","spinner-border text-info",4,"ngIf"],[4,"ngIf"],[1,"mybox"],[1,"mybox-header"],[1,"middle"],[1,"row"],[1,"col-lg-4","col-sm-12","col-xs-12"],[3,"newItemEvent"],[1,"spinner-border","text-info"],["class","no-record",4,"ngIf"],[1,"no-record"],[1,"table-responsive"],["id","itemListTable",1,"table","table-striped","table-bordered","table-hover"],["scope","col"],[4,"ngFor","ngForOf"],[1,"rightSubmit"],[1,"btn","btn-info","btn-sm",3,"click"],["data-toggle","modal","data-target","#viewDetails",1,"btn","btn-outline-info","round",3,"click"],["aria-hidden","true",1,"fas","fa-bars"],["type","checkbox",1,"form-control",3,"ngModel","ngModelChange"],[1,"topBack","btn","btn-info","btn-sm",3,"click"],["aria-hidden","true",1,"fas","fa-arrow-left"],[1,"bottomBack"],[1,"btn","btn-info","btn-sm","topBack",3,"click"],[3,"selectedApproval"]],template:function(n,i){1&n&&(t.YNc(0,A,10,0,"div",0),t.TgZ(1,"div",1),t.YNc(2,h,1,0,"div",2),t.qZA(),t.YNc(3,q,9,2,"div",0),t.YNc(4,b,35,1,"div",3),t.YNc(5,C,16,1,"div",3)),2&n&&(t.Q6J("ngIf",i.showTable),t.xp6(2),t.Q6J("ngIf",i.loadingData),t.xp6(1),t.Q6J("ngIf",i.showTable),t.xp6(1),t.Q6J("ngIf",i.approve),t.xp6(1),t.Q6J("ngIf",i.paymentInvoice))},directives:[r.O5,v.L,r.sg,c.Wl,c.JJ,c.On,T.P],pipes:[r.uU,r.JJ],styles:[""]}),e})()}];let w=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[g.Bz.forChild(U)],g.Bz]}),e})();var k=a(7543),J=a(4466);let M=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[r.ez,w,c.u5,k.b,J.m]]}),e})()}}]);