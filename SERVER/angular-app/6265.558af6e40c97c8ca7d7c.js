"use strict";(self.webpackChunkangular_application=self.webpackChunkangular_application||[]).push([[6265],{6265:(y,p,d)=>{d.r(p),d.d(p,{InitiateModule:()=>ae});var Z=d(5913),g=d(8583),m=d(6901),c=d(4762),r=d(665),e=d(639),T=d(4495),D=d(5620),_=d(9344),v=d(1879);let b=(()=>{class i{constructor(){this.changeFinYear=new e.vpe}ngOnInit(){}changeFinancialYear(t){this.changeFinYear.emit(t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-search-box"]],inputs:{POType:"POType"},outputs:{changeFinYear:"changeFinYear"},decls:26,vars:2,consts:[[1,"mybox"],[1,"mybox-header"],[1,"middle"],[1,"row"],[1,"col-lg-4","col-sm-12","col-xs-12"],[3,"newItemEvent"],[1,"col-lg-4"],["type","radio","id","Subsidy","name","fav_language","value","Subsidy",3,"formControl"],["for","Subsidy"],["type","radio","id","Non-Subsidy","name","fav_language","value","NonSubsidy",3,"formControl"],["for","Non-Subsidy"],[2,"color","red","text-align","right"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"span"),e.TgZ(3,"strong"),e.TgZ(4,"label"),e._uU(5,"Initiate Purchase Order"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",2),e.TgZ(7,"div",3),e.TgZ(8,"div",4),e.TgZ(9,"app-financial-year",5),e.NdJ("newItemEvent",function(s){return n.changeFinancialYear(s)}),e.qZA(),e.qZA(),e.TgZ(10,"div",6),e.TgZ(11,"label"),e._uU(12,"Purchase Order Type: "),e.qZA(),e._UZ(13,"br"),e._UZ(14,"input",7),e.TgZ(15,"label",8),e._uU(16,"\xa0\xa0 Subsidy"),e.qZA(),e._uU(17," \xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 "),e._UZ(18,"input",9),e.TgZ(19,"label",10),e._uU(20,"\xa0\xa0 Non-Subsidy"),e.qZA(),e.qZA(),e.TgZ(21,"div",6),e.TgZ(22,"h6",11),e._uU(23,"** P.O. Initiation is not possible, "),e._UZ(24,"br"),e._uU(25," if the purchase price is not added **"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(14),e.Q6J("formControl",n.POType),e.xp6(4),e.Q6J("formControl",n.POType))},directives:[v.L,r._,r.Fj,r.JJ,r.oH],styles:[""]}),i})();var A=d(1410);function S(i,o){1&i&&(e.TgZ(0,"div",13),e._uU(1," No record found. "),e.qZA())}function O(i,o){if(1&i&&(e.TgZ(0,"option",24),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("ngValue",t),e.xp6(1),e.Oqu(t.TradeName)}}function q(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e._UZ(7,"br"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.ALo(17,"number"),e.qZA(),e.TgZ(18,"td",18),e.TgZ(19,"select",19),e.NdJ("ngModelChange",function(a){return e.CHM(t).$implicit.dealer=a}),e.TgZ(20,"option",20),e._uU(21,"--Select--"),e.qZA(),e.YNc(22,O,2,2,"option",21),e.qZA(),e.qZA(),e.TgZ(23,"td"),e.TgZ(24,"button",22),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw(2).showSinglePO(s)}),e._UZ(25,"i",23),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=o.$implicit,n=o.index;e.xp6(2),e.Oqu(n+1),e.xp6(2),e.Oqu(t.permit_no),e.xp6(2),e.hij(" ",t.farmer_name," "),e.xp6(2),e.hij(" (",t.farmer_id,")"),e.xp6(2),e.Oqu(t.implement),e.xp6(2),e.Oqu(t.make),e.xp6(2),e.Oqu(t.model),e.xp6(2),e.Oqu(e.lcZ(17,10,t.finalPrice)),e.xp6(3),e.Q6J("ngModel",t.dealer),e.xp6(3),e.Q6J("ngForOf",t.dealers)}}function P(i,o){if(1&i&&(e.TgZ(0,"div"),e.TgZ(1,"div",14),e.TgZ(2,"table",15),e._UZ(3,"caption"),e.TgZ(4,"thead"),e.TgZ(5,"tr"),e.TgZ(6,"th",16),e._uU(7,"SL."),e.qZA(),e.TgZ(8,"th",16),e._uU(9,"Permit no."),e.qZA(),e.TgZ(10,"th",16),e._uU(11,"Farmer Name (ID)"),e.qZA(),e.TgZ(12,"th",16),e._uU(13,"Implement"),e.qZA(),e.TgZ(14,"th",16),e._uU(15,"Make"),e.qZA(),e.TgZ(16,"th",16),e._uU(17,"Model"),e.qZA(),e.TgZ(18,"th",16),e._uU(19,"Price "),e._UZ(20,"br"),e._uU(21," + Tax(\u20b9) "),e.qZA(),e.TgZ(22,"th",16),e._uU(23,"Vendor"),e.qZA(),e.TgZ(24,"th",16),e._uU(25,"Initiate P.O."),e.qZA(),e.qZA(),e.qZA(),e.TgZ(26,"tbody"),e.YNc(27,q,26,12,"tr",17),e.ALo(28,"search"),e.ALo(29,"search"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(30,"div"),e._UZ(31,"br"),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(27),e.Q6J("ngForOf",e.xi3(28,1,e.xi3(29,4,t.allData,t.search_farmer_name),t.search_permit_no))}}let U=(()=>{class i{constructor(t,n){this.service=t,this.toastr=n,this.search_farmer_name="",this.search_permit_no="",this.showPODetais=new e.vpe,this.allData=[],this.loadAllOrders=a=>(0,c.mG)(this,void 0,void 0,function*(){try{this.allData=yield this.service.get(`/accountant/getAllOrdersForGI?finYear=${a}`),this.allData.forEach(s=>{s.finalPrice=s.PurchaseInvoiceValue||0,s.dealer="",s.Quantity=1})}catch(s){console.error(s),this.toastr.error("Unable to Load All Subsidies Permit List")}})}ngOnInit(){this.financialYear.valueChanges.subscribe(t=>{this.loadAllOrders(t)}),this.financialYear.value&&this.loadAllOrders(this.financialYear.value)}showSinglePO(t){if(this.finalPrice=t.finalPrice,"0"==this.finalPrice)this.toastr.error("PO cannot be generated if the final price is 0");else{t.VendorID=t.dealer.VendorID,t.TotalPurchaseTaxableValue=t.PurchaseTaxableValue,t.TotalPurchaseCGST=t.PurchaseCGST,t.TotalPurchaseSGST=t.PurchaseCGST,t.TotalPurchaseIGST=t.PurchaseIGST,t.TotalPurchaseInvoiceValue=t.PurchaseInvoiceValue;const n=t.TaxRate||12,a=t.FullCost/(+n+100)*100,s=a/100*(n/2),l=a/100*(n/2),h=t.FullCost||0;t.TotalSellTaxableValue=a,t.TotalSellCGST=s,t.TotalSellSGST=l,t.TotalSellIGST=0,t.TotalSellInvoiceValue=h,t.OrderReferenceNo=t.permit_no,t.POAmount=t.TotalPurchaseInvoiceValue,this.showPODetais.emit({orderList:[t],customerDetails:{permit_no:t.permit_no,farmer_name:t.farmer_name,farmer_father_name:t.farmer_father_name,village_name:t.village_name,gp_name:t.gp_name,block_name:t.block_name,dist_name:t.dist_name},vendorID:t.VendorID})}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(D.v),e.Y36(_._W))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-subsidies-orders"]],inputs:{financialYear:"financialYear"},outputs:{showPODetais:"showPODetais"},decls:22,vars:4,consts:[[1,"mybox"],[1,"mybox-header"],[1,"row"],[1,"col-3"],[1,"input-group","mb-3","input-group-sm"],[1,"input-group-prepend"],[1,"input-group-text"],["aria-hidden","true",1,"fas","fa-search"],["type","text","placeholder","Enter farmer name",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-6"],["type","text","placeholder","Enter permit no.",1,"form-control",3,"ngModel","ngModelChange"],["class","no-record",4,"ngIf"],[4,"ngIf"],[1,"no-record"],[1,"table-responsive","fixed-height-table"],["id","indentListTable",1,"table","table-striped","table-bordered","table-hover"],["scope","col"],[4,"ngFor","ngForOf"],[2,"width","20%"],["disable","!x.finalPrice",1,"form-control",3,"ngModel","ngModelChange"],["value",""],[3,"ngValue",4,"ngFor","ngForOf"],["disable","!x.dealer",1,"btn","btn-outline-info",3,"click"],[1,"fa","fa-arrow-right"],[3,"ngValue"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e.TgZ(6,"span",6),e._UZ(7,"i",7),e.qZA(),e.qZA(),e.TgZ(8,"input",8),e.NdJ("ngModelChange",function(s){return n.search_farmer_name=s}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",9),e.TgZ(10,"strong"),e.TgZ(11,"label"),e._uU(12,"All Permit List"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"div",3),e.TgZ(14,"div",4),e.TgZ(15,"div",5),e.TgZ(16,"span",6),e._UZ(17,"i",7),e.qZA(),e.qZA(),e.TgZ(18,"input",10),e.NdJ("ngModelChange",function(s){return n.search_permit_no=s}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(19,"div"),e.YNc(20,S,2,0,"div",11),e.YNc(21,P,32,7,"div",12),e.qZA(),e.qZA()),2&t&&(e.xp6(8),e.Q6J("ngModel",n.search_farmer_name),e.xp6(10),e.Q6J("ngModel",n.search_permit_no),e.xp6(2),e.Q6J("ngIf",0==n.allData.length),e.xp6(1),e.Q6J("ngIf",0!=n.allData.length))},directives:[r.Fj,r.JJ,r.On,g.O5,g.sg,r.EJ,r.YN,r.Kr],pipes:[A.G,g.JJ],styles:[""]}),i})();function C(i,o){if(1&i&&(e.TgZ(0,"option",31),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("ngValue",t.DivisionID),e.xp6(1),e.Oqu(t.DivisionName)}}function M(i,o){if(1&i&&(e.TgZ(0,"option",32),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.s9C("value",t),e.xp6(1),e.Oqu(t)}}function I(i,o){if(1&i&&(e.TgZ(0,"option",32),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.s9C("value",t),e.xp6(1),e.Oqu(t)}}function x(i,o){if(1&i&&(e.TgZ(0,"option",32),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.s9C("value",t),e.xp6(1),e.Oqu(t)}}function k(i,o){if(1&i&&(e.TgZ(0,"option",31),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("ngValue",t.PackageSize),e.xp6(1),e.Oqu(t.PackageSize)}}function L(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"label"),e._uU(2,"Package Size"),e.TgZ(3,"span",2),e._uU(4,"*"),e.qZA(),e._uU(5," :"),e.qZA(),e.TgZ(6,"select",3),e.NdJ("ngModelChange",function(a){return e.CHM(t),e.oxw().nonSubsidyData.PackageSize=a})("change",function(){return e.CHM(t),e.oxw().loadPackageUnits()}),e.TgZ(7,"option",4),e._uU(8,"--select--"),e.qZA(),e.YNc(9,k,2,2,"option",5),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(6),e.Q6J("ngModel",t.nonSubsidyData.PackageSize),e.xp6(3),e.Q6J("ngForOf",t.packageSizeList)}}function N(i,o){if(1&i&&(e.TgZ(0,"option",31),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("ngValue",t.UnitOfMeasurement),e.xp6(1),e.Oqu(t.UnitOfMeasurement)}}function F(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"label"),e._uU(2,"Package Unit of Measurement"),e.TgZ(3,"span",2),e._uU(4,"*"),e.qZA(),e._uU(5," :"),e.qZA(),e.TgZ(6,"select",3),e.NdJ("ngModelChange",function(a){return e.CHM(t),e.oxw().nonSubsidyData.PackageUnitOfMeasurement=a})("change",function(){return e.CHM(t),e.oxw().loadPackagePrice()}),e.TgZ(7,"option",4),e._uU(8,"--select--"),e.qZA(),e.YNc(9,N,2,2,"option",5),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(6),e.Q6J("ngModel",t.nonSubsidyData.PackageUnitOfMeasurement),e.xp6(3),e.Q6J("ngForOf",t.packageUnitList)}}function Q(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"label"),e._uU(2,"Package Quantity"),e.TgZ(3,"span",2),e._uU(4,"*"),e.qZA(),e._uU(5," :"),e.qZA(),e.TgZ(6,"input",33),e.NdJ("ngModelChange",function(a){return e.CHM(t),e.oxw().nonSubsidyData.PackageQuantity=a}),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(6),e.Q6J("ngModel",t.nonSubsidyData.PackageQuantity)}}function J(i,o){if(1&i&&(e.TgZ(0,"option",31),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("ngValue",t),e.xp6(1),e.Oqu(t.TradeName)}}function V(i,o){if(1&i&&(e.TgZ(0,"option",31),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("ngValue",t),e.xp6(1),e.hij(" ",t.TradeName," ")}}function G(i,o){if(1&i&&(e.TgZ(0,"div",27),e.TgZ(1,"div",34),e.TgZ(2,"table",35),e._UZ(3,"caption"),e.TgZ(4,"thead"),e.TgZ(5,"tr"),e.TgZ(6,"th",36),e._uU(7,"Vendor Trade Name: "),e.qZA(),e.TgZ(8,"th",36),e._uU(9),e.qZA(),e.qZA(),e.TgZ(10,"tr"),e.TgZ(11,"th",36),e._uU(12,"Vendor Bussiness Name: "),e.qZA(),e.TgZ(13,"th",36),e._uU(14),e.qZA(),e.qZA(),e.TgZ(15,"tr"),e.TgZ(16,"th",36),e._uU(17,"Customer Name: "),e.qZA(),e.TgZ(18,"th",36),e._uU(19),e.qZA(),e.qZA(),e.TgZ(20,"tr"),e.TgZ(21,"th",36),e._uU(22,"Customer Email-ID: "),e.qZA(),e.TgZ(23,"th",36),e._uU(24),e.qZA(),e.qZA(),e.TgZ(25,"tr"),e.TgZ(26,"th",36),e._uU(27,"Order Reference No.: "),e.qZA(),e.TgZ(28,"th",36),e._uU(29),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(9),e.Oqu(t.vendorDetails.TradeName),e.xp6(5),e.Oqu(t.vendorDetails.LegalBussinessName),e.xp6(5),e.Oqu(t.customerDetailsNgModel.LegalCustomerName||"--"),e.xp6(5),e.Oqu(t.customerDetailsNgModel.EmailID||"--"),e.xp6(5),e.Oqu(t.orderReferenceNo||"--")}}function w(i,o){if(1&i&&(e.TgZ(0,"div",34),e.TgZ(1,"table",35),e._UZ(2,"caption"),e.TgZ(3,"thead"),e.TgZ(4,"tr"),e.TgZ(5,"th",36),e._uU(6,"Rate per Unit: "),e.qZA(),e.TgZ(7,"th",36),e._uU(8),e.ALo(9,"number"),e.qZA(),e.qZA(),e.TgZ(10,"tr"),e.TgZ(11,"th",36),e._uU(12,"Total Taxable Value: "),e.qZA(),e.TgZ(13,"th",36),e._uU(14),e.ALo(15,"number"),e.qZA(),e.qZA(),e.TgZ(16,"tr"),e.TgZ(17,"th",36),e._uU(18,"CGST: "),e.qZA(),e.TgZ(19,"th",36),e._uU(20),e.ALo(21,"number"),e.qZA(),e.qZA(),e.TgZ(22,"tr"),e.TgZ(23,"th",36),e._uU(24,"SGST: "),e.qZA(),e.TgZ(25,"th",36),e._uU(26),e.ALo(27,"number"),e.qZA(),e.qZA(),e.TgZ(28,"tr"),e.TgZ(29,"th",36),e._uU(30,"Invoice Value: "),e.qZA(),e.TgZ(31,"th",36),e._uU(32),e.ALo(33,"number"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(8),e.Oqu(e.lcZ(9,5,t.modelDetails.PurchaseTaxableValue)),e.xp6(6),e.Oqu(e.lcZ(15,7,t.modelDetails.TotalPurchaseTaxableValue)),e.xp6(6),e.Oqu(e.lcZ(21,9,t.modelDetails.TotalPurchaseCGST)),e.xp6(6),e.Oqu(e.lcZ(27,11,t.modelDetails.TotalPurchaseSGST)),e.xp6(6),e.Oqu(e.lcZ(33,13,t.modelDetails.TotalPurchaseInvoiceValue))}}let E=(()=>{class i{constructor(t,n){this.service=t,this.toastr=n,this.divisionList=[],this.implementList=[],this.makeList=[],this.modelList=[],this.packageSizeList=[],this.packageUnitList=[],this.vendorsList=[],this.CustomerList=[],this.nonSubsidyData={DivisionID:"",Implement:"",Make:"",Model:"",Quantity:"",UnitOfMeasurement:"",PackageSize:"",PackageUnitOfMeasurement:"",PackageQuantity:""},this.modelDetails={},this.customerDetailsNgModel="",this.vendorDetails="",this.orderReferenceNo="",this.packageDetails={},this.addOrder=new e.vpe,this.customerDetails="",this.loadPackagePrice=()=>(0,c.mG)(this,void 0,void 0,function*(){if(this.nonSubsidyData.Model){const a={DivisionID:this.nonSubsidyData.DivisionID,Implement:this.nonSubsidyData.Implement,Make:this.nonSubsidyData.Make,Model:this.nonSubsidyData.Model,PackageSize:this.nonSubsidyData.PackageSize,UnitOfMeasurement:this.nonSubsidyData.PackageUnitOfMeasurement},s=yield this.service.post("/api/getPackagePrice",a);s?(this.packageDetails=s,this.calculatePackageQuantity()):this.toastr.error("Sorry the Price of that Package is not added.")}}),this.loadPackageSizeList=()=>(0,c.mG)(this,void 0,void 0,function*(){}),this.loadDivisionList=()=>(0,c.mG)(this,void 0,void 0,function*(){try{const a=yield this.service.get("/accountant/getDivisionList");this.divisionList=a,this.nonSubsidyData.DivisionID="",this.nonSubsidyData.Implement="",this.nonSubsidyData.Make="",this.nonSubsidyData.Model=""}catch(a){console.error(a)}}),this.loadVendorsList=()=>(0,c.mG)(this,void 0,void 0,function*(){try{const a=yield this.service.get("/accountant/getDistrictWiseVendorList");this.vendorsList=a}catch(a){console.error(a)}}),this.loadCustomerList=()=>(0,c.mG)(this,void 0,void 0,function*(){try{const a=yield this.service.get("/accountant/getDistrictWiseCustomerList");this.CustomerList=a}catch(a){console.error(a)}}),this.loadImplementList=()=>(0,c.mG)(this,void 0,void 0,function*(){try{const a=yield this.service.get(`/accountant/getImplementList?DivisionID=${this.nonSubsidyData.DivisionID}`);this.implementList=a.map(s=>s.Implement),1==this.implementList.length?(this.nonSubsidyData.Implement=this.implementList[0],this.loadMakeList()):(this.nonSubsidyData.Implement="",this.nonSubsidyData.Make="",this.nonSubsidyData.Model="",this.nonSubsidyData.PackageSize="",this.makeList=[],this.modelList=[],this.packageSizeList=[],this.nonSubsidyData.PackageUnitOfMeasurement="",this.packageUnitList=[])}catch(a){console.error(a)}}),this.loadMakeList=()=>(0,c.mG)(this,void 0,void 0,function*(){try{const a={DivisionID:this.nonSubsidyData.DivisionID,Implement:this.nonSubsidyData.Implement},s=yield this.service.post("/accountant/getMakeList",a);this.makeList=s.map(l=>l.Make),1==this.makeList.length?(this.nonSubsidyData.Make=this.makeList[0],this.loadModelList()):(this.nonSubsidyData.Make="",this.nonSubsidyData.Model="",this.nonSubsidyData.PackageSize="",this.nonSubsidyData.PackageUnitOfMeasurement="",this.modelList=[],this.packageSizeList=[],this.packageUnitList=[])}catch(a){console.error(a)}}),this.loadModelList=()=>(0,c.mG)(this,void 0,void 0,function*(){try{const a={DivisionID:this.nonSubsidyData.DivisionID,Implement:this.nonSubsidyData.Implement,Make:this.nonSubsidyData.Make},s=yield this.service.post("/accountant/getModelList",a);this.modelList=s.map(l=>l.Model),1==this.modelList.length?(this.nonSubsidyData.Model=this.modelList[0],this.loadModelDetails()):(this.nonSubsidyData.Model="",this.nonSubsidyData.PackageSize="",this.nonSubsidyData.PackageUnitOfMeasurement="",this.packageSizeList=[],this.packageUnitList=[])}catch(a){console.error(a)}}),this.loadModelDetails=()=>(0,c.mG)(this,void 0,void 0,function*(){try{const a={DivisionID:this.nonSubsidyData.DivisionID,Implement:this.nonSubsidyData.Implement,Make:this.nonSubsidyData.Make,Model:this.nonSubsidyData.Model},s=yield this.service.post("/accountant/getModelDetails",a);this.modelDetails=s.modelDetails,this.packageSizeList=s.packageList,this.nonSubsidyData.PackageUnitOfMeasurement="",this.packageUnitList=[];const l=this.nonSubsidyData.Quantity?this.nonSubsidyData.Quantity:1;this.modelDetails.TotalPurchaseTaxableValue=(this.modelDetails.PurchaseTaxableValue*l).toFixed(2),this.modelDetails.TotalPurchaseInvoiceValue=(this.modelDetails.PurchaseInvoiceValue*l).toFixed(2),this.modelDetails.TotalPurchaseCGST=(this.modelDetails.PurchaseCGST*l).toFixed(2),this.modelDetails.TotalPurchaseSGST=(this.modelDetails.PurchaseSGST*l).toFixed(2),this.nonSubsidyData.UnitOfMeasurement=this.modelDetails.UnitOfMeasurement}catch(a){console.error(a)}}),this.loadPackageUnits=()=>(0,c.mG)(this,void 0,void 0,function*(){try{const a={DivisionID:this.nonSubsidyData.DivisionID,Implement:this.nonSubsidyData.Implement,Make:this.nonSubsidyData.Make,Model:this.nonSubsidyData.Model,PackageSize:this.nonSubsidyData.PackageSize},s=yield this.service.post("/accountant/getPackageUnits",a);this.packageUnitList=s,1==this.packageUnitList.length?(this.nonSubsidyData.PackageUnitOfMeasurement=this.packageUnitList[0].UnitOfMeasurement,this.loadPackagePrice()):this.nonSubsidyData.PackageUnitOfMeasurement=""}catch(a){console.error(a)}}),this.shwPurchaseOrderForNonSubsidy=()=>(0,c.mG)(this,void 0,void 0,function*(){this.modelDetails.Quantity=this.nonSubsidyData.Quantity,this.modelDetails.VendorID=this.nonSubsidyData.VendorID,this.modelDetails.TotalSellTaxableValue=(this.modelDetails.SellTaxableValue*this.modelDetails.Quantity).toFixed(2),this.modelDetails.TotalSellCGST=(this.modelDetails.SellCGST*this.modelDetails.Quantity).toFixed(2),this.modelDetails.TotalSellSGST=(this.modelDetails.SellCGST*this.modelDetails.Quantity).toFixed(2),this.modelDetails.TotalSellInvoiceValue=(this.modelDetails.SellInvoiceValue*this.modelDetails.Quantity).toFixed(2),this.modelDetails.VendorID=this.vendorDetails.VendorID,this.modelDetails.CustomerID=this.customerDetailsNgModel.CustomerID,this.modelDetails.PackageSize=this.nonSubsidyData.PackageSize,this.modelDetails.PackageUnitOfMeasurement=this.nonSubsidyData.PackageUnitOfMeasurement,this.modelDetails.PackageQuantity=0|this.nonSubsidyData.PackageQuantity,this.modelDetails.DivisionName=this.divisionList[this.divisionList.findIndex(a=>a.DivisionID==this.nonSubsidyData.DivisionID)].DivisionName,this.orderList.value.push(this.modelDetails),this.nonSubsidyData={DivisionID:"",Implement:"",Make:"",Model:"",Quantity:"",UnitOfMeasurement:"",PackageSize:"",PackageUnitOfMeasurement:"",PackageQuantity:""},this.implementList=[],this.makeList=[],this.modelList=[],this.packageSizeList=[],this.packageUnitList=[],this.modelDetails={}}),this.calculatePackageQuantity=()=>{const a=this.nonSubsidyData.Quantity?this.nonSubsidyData.Quantity:1,s=this.nonSubsidyData.PackageSize,l=this.nonSubsidyData.UnitOfMeasurement,h=this.nonSubsidyData.PackageUnitOfMeasurement;let u=1;l==h?u=1:"Kilograms"==l&&"Gram"==h?u=1e3:"Metric Ton"==l&&"Gram"==h?u=1e6:"Metric Ton"==l&&"Kilograms"==h?u=1e3:"Tonnes"==l&&"Gram"==h?u=1e6:"Tonnes"==l&&"Kilograms"==h||"Liter"==l&&"Mililiter"==h?u=1e3:this.toastr.error("Selected unit not Mapped"),this.nonSubsidyData.PackageQuantity=a*u/s,a*u%s==0?this.calculateItemWiseTax():this.toastr.error("Sorry, Please enter valid Quantity")},this.calculateItemQuantity=()=>{this.nonSubsidyData.PackageUnitOfMeasurement?this.calculatePackageQuantity():this.calculateItemWiseTax()},this.calculateItemWiseTax=()=>{const a=this.nonSubsidyData.PackageQuantity?this.nonSubsidyData.PackageQuantity:this.nonSubsidyData.Quantity?this.nonSubsidyData.Quantity:1,s=this.nonSubsidyData.PackageQuantity?this.packageDetails.PurchaseTaxableValue:this.modelDetails.PurchaseTaxableValue,l=this.nonSubsidyData.PackageQuantity?this.packageDetails.PurchaseCGST:this.modelDetails.PurchaseCGST,h=this.nonSubsidyData.PackageQuantity?this.packageDetails.PurchaseSGST:this.modelDetails.PurchaseSGST,u=this.nonSubsidyData.PackageQuantity?this.packageDetails.PurchaseInvoiceValue:this.modelDetails.PurchaseInvoiceValue;this.modelDetails.PurchaseTaxableValue=s,this.modelDetails.PurchaseCGST=l,this.modelDetails.PurchaseSGST=h,this.modelDetails.PurchaseInvoiceValue=u,this.modelDetails.TotalPurchaseTaxableValue=(s*a).toFixed(2),this.modelDetails.RatePerUnit=(this.modelDetails.TotalPurchaseTaxableValue/this.nonSubsidyData.Quantity).toFixed(2),this.modelDetails.TotalPurchaseCGST=(l*a).toFixed(2),this.modelDetails.TotalPurchaseSGST=(h*a).toFixed(2),this.modelDetails.TotalPurchaseInvoiceValue=(u*a).toFixed(2)},this.selectVenorID=()=>{this.vendorID.setValue(this.vendorDetails.VendorID)},this.selectCustomerDetails=()=>{this.customerDetails.setValue({CustomerName:this.customerDetailsNgModel.LegalCustomerName,OrderReferenceNo:"",CustomerMobileNumber:this.customerDetailsNgModel.ContactNumber,CustomerEmailID:this.customerDetailsNgModel.EmailID,CustomerGSTN:this.customerDetailsNgModel.GSTN})},this.loadDivisionList(),this.loadVendorsList(),this.loadCustomerList(),this.loadPackageSizeList()}ngOnInit(){}get orderListLength(){return this.orderList.value.length}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(D.v),e.Y36(_._W))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-order-entry-form"]],inputs:{orderList:"orderList",customerDetails:"customerDetails",vendorID:"vendorID"},outputs:{addOrder:"addOrder"},decls:120,vars:24,consts:[[1,"row"],[1,"col-lg-4"],[1,"asterisk-mark"],["required","",1,"form-control",3,"ngModel","ngModelChange","change"],["value","","disabled",""],[3,"ngValue",4,"ngFor","ngForOf"],[3,"value",4,"ngFor","ngForOf"],["type","number","placeholder","Enter Quantity. (Default is 1)","required","",1,"form-control",3,"ngModel","keyup","ngModelChange"],["required","",1,"form-control",3,"ngModel","ngModelChange"],["value","Bags"],["value","Kilograms"],["value","Kilometers"],["value","Meter"],["value","Metric Ton"],["value","Numbers"],["value","Packs"],["value","Pieces"],["value","Pairs"],["value","Quintal"],["value","Sets"],["value","Tonnes"],["value","Foots"],["value","Liter"],["class","col-lg-4",4,"ngIf"],["required","",1,"form-control",3,"disabled","ngModel","ngModelChange","change"],["type","text","placeholder","Enter Order Reference Number","required","",1,"form-control",3,"disabled","ngModel","ngModelChange"],["class","col-lg-6",4,"ngIf"],[1,"col-lg-6"],["class","table-responsive",4,"ngIf"],[2,"text-align","right"],[1,"btn","btn-lg","btn-info","round",3,"disabled","click"],[3,"ngValue"],[3,"value"],["type","number","placeholder","Total Package Quantity","disabled","","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"table-responsive"],[1,"table","table-hover",2,"text-align","left"],["scope","col"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"label"),e._uU(3,"Division"),e.TgZ(4,"span",2),e._uU(5,"*"),e.qZA(),e._uU(6," :"),e.qZA(),e.TgZ(7,"select",3),e.NdJ("ngModelChange",function(s){return n.nonSubsidyData.DivisionID=s})("change",function(){return n.loadImplementList()}),e.TgZ(8,"option",4),e._uU(9,"--select--"),e.qZA(),e.YNc(10,C,2,2,"option",5),e.qZA(),e.qZA(),e.TgZ(11,"div",1),e.TgZ(12,"label"),e._uU(13,"Product Category"),e.TgZ(14,"span",2),e._uU(15,"*"),e.qZA(),e._uU(16," :"),e.qZA(),e.TgZ(17,"select",3),e.NdJ("ngModelChange",function(s){return n.nonSubsidyData.Implement=s})("change",function(){return n.loadMakeList()}),e.TgZ(18,"option",4),e._uU(19,"--select--"),e.qZA(),e.YNc(20,M,2,2,"option",6),e.qZA(),e.qZA(),e.TgZ(21,"div",1),e.TgZ(22,"label"),e._uU(23,"Manufacturer"),e.TgZ(24,"span",2),e._uU(25,"*"),e.qZA(),e._uU(26," :"),e.qZA(),e.TgZ(27,"select",3),e.NdJ("ngModelChange",function(s){return n.nonSubsidyData.Make=s})("change",function(){return n.loadModelList()}),e.TgZ(28,"option",4),e._uU(29,"--select--"),e.qZA(),e.YNc(30,I,2,2,"option",6),e.qZA(),e.qZA(),e.TgZ(31,"div",1),e.TgZ(32,"label"),e._uU(33,"Model / Item"),e.TgZ(34,"span",2),e._uU(35,"*"),e.qZA(),e._uU(36," :"),e.qZA(),e.TgZ(37,"select",3),e.NdJ("ngModelChange",function(s){return n.nonSubsidyData.Model=s})("change",function(){return n.loadModelDetails()}),e.TgZ(38,"option",4),e._uU(39,"--select--"),e.qZA(),e.YNc(40,x,2,2,"option",6),e.qZA(),e.qZA(),e.TgZ(41,"div",1),e.TgZ(42,"label"),e._uU(43,"Quantity"),e.TgZ(44,"span",2),e._uU(45,"*"),e.qZA(),e._uU(46," :"),e.qZA(),e.TgZ(47,"input",7),e.NdJ("keyup",function(){return n.calculateItemQuantity()})("ngModelChange",function(s){return n.nonSubsidyData.Quantity=s}),e.qZA(),e.qZA(),e.TgZ(48,"div",1),e.TgZ(49,"label"),e._uU(50,"Unit of Measurement"),e.TgZ(51,"span",2),e._uU(52,"*"),e.qZA(),e._uU(53," :"),e.qZA(),e.TgZ(54,"select",8),e.NdJ("ngModelChange",function(s){return n.nonSubsidyData.UnitOfMeasurement=s}),e.TgZ(55,"option",4),e._uU(56,"--select--"),e.qZA(),e.TgZ(57,"option",9),e._uU(58,"Bags"),e.qZA(),e.TgZ(59,"option",10),e._uU(60,"Kilograms"),e.qZA(),e.TgZ(61,"option",11),e._uU(62,"Kilometers"),e.qZA(),e.TgZ(63,"option",12),e._uU(64,"Meter"),e.qZA(),e.TgZ(65,"option",13),e._uU(66,"Metric Ton"),e.qZA(),e.TgZ(67,"option",14),e._uU(68,"Numbers"),e.qZA(),e.TgZ(69,"option",15),e._uU(70,"Packs"),e.qZA(),e.TgZ(71,"option",16),e._uU(72,"Pieces"),e.qZA(),e.TgZ(73,"option",17),e._uU(74,"Pairs"),e.qZA(),e.TgZ(75,"option",18),e._uU(76,"Quintal"),e.qZA(),e.TgZ(77,"option",19),e._uU(78,"Sets"),e.qZA(),e.TgZ(79,"option",20),e._uU(80,"Tonnes"),e.qZA(),e.TgZ(81,"option",21),e._uU(82,"Foots"),e.qZA(),e.TgZ(83,"option",22),e._uU(84,"Liter"),e.qZA(),e.qZA(),e.qZA(),e.YNc(85,L,10,2,"div",23),e.YNc(86,F,10,2,"div",23),e.YNc(87,Q,7,1,"div",23),e.TgZ(88,"div",1),e.TgZ(89,"label"),e._uU(90,"Vendor"),e.TgZ(91,"span",2),e._uU(92,"*"),e.qZA(),e._uU(93," :"),e.qZA(),e.TgZ(94,"select",24),e.NdJ("ngModelChange",function(s){return n.vendorDetails=s})("change",function(){return n.selectVenorID()}),e.TgZ(95,"option",4),e._uU(96,"--select--"),e.qZA(),e.YNc(97,J,2,2,"option",5),e.qZA(),e.qZA(),e.TgZ(98,"div",1),e.TgZ(99,"label"),e._uU(100,"Customer :"),e.qZA(),e.TgZ(101,"select",24),e.NdJ("ngModelChange",function(s){return n.customerDetailsNgModel=s})("change",function(){return n.selectCustomerDetails()}),e.TgZ(102,"option",4),e._uU(103,"--select--"),e.qZA(),e.YNc(104,V,2,2,"option",5),e.qZA(),e.qZA(),e.TgZ(105,"div",1),e.TgZ(106,"label"),e._uU(107,"Order Reference :"),e.qZA(),e.TgZ(108,"input",25),e.NdJ("ngModelChange",function(s){return n.orderReferenceNo=s}),e.qZA(),e.qZA(),e.qZA(),e._UZ(109,"br"),e._UZ(110,"br"),e.TgZ(111,"div",0),e.YNc(112,G,30,5,"div",26),e.TgZ(113,"div",27),e.YNc(114,w,34,15,"div",28),e.qZA(),e.qZA(),e.TgZ(115,"div"),e._UZ(116,"br"),e.TgZ(117,"div",29),e.TgZ(118,"button",30),e.NdJ("click",function(){return n.shwPurchaseOrderForNonSubsidy()}),e._uU(119," Add Item to Order List"),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(7),e.Q6J("ngModel",n.nonSubsidyData.DivisionID),e.xp6(3),e.Q6J("ngForOf",n.divisionList),e.xp6(7),e.Q6J("ngModel",n.nonSubsidyData.Implement),e.xp6(3),e.Q6J("ngForOf",n.implementList),e.xp6(7),e.Q6J("ngModel",n.nonSubsidyData.Make),e.xp6(3),e.Q6J("ngForOf",n.makeList),e.xp6(7),e.Q6J("ngModel",n.nonSubsidyData.Model),e.xp6(3),e.Q6J("ngForOf",n.modelList),e.xp6(7),e.Q6J("ngModel",n.nonSubsidyData.Quantity),e.xp6(7),e.Q6J("ngModel",n.nonSubsidyData.UnitOfMeasurement),e.xp6(31),e.Q6J("ngIf",n.packageSizeList.length>0),e.xp6(1),e.Q6J("ngIf",n.packageSizeList.length>0),e.xp6(1),e.Q6J("ngIf",n.packageSizeList.length>0),e.xp6(7),e.Q6J("disabled",n.orderListLength>0)("ngModel",n.vendorDetails),e.xp6(3),e.Q6J("ngForOf",n.vendorsList),e.xp6(4),e.Q6J("disabled",n.orderListLength>0)("ngModel",n.customerDetailsNgModel),e.xp6(3),e.Q6J("ngForOf",n.CustomerList),e.xp6(4),e.Q6J("disabled",n.orderListLength>0)("ngModel",n.orderReferenceNo),e.xp6(4),e.Q6J("ngIf",n.vendorDetails),e.xp6(2),e.Q6J("ngIf",n.modelDetails.PurchaseTaxableValue),e.xp6(4),e.Q6J("disabled",""==n.nonSubsidyData.UnitOfMeasurement||""==n.nonSubsidyData.Quantity||""==n.nonSubsidyData.Model||""==n.vendorDetails||""==n.nonSubsidyData.Implement||""==n.nonSubsidyData.Make||""==n.nonSubsidyData.DivisionID))},directives:[r.EJ,r.Q7,r.JJ,r.On,r.YN,r.Kr,g.sg,r.wV,r.Fj,g.O5],pipes:[g.JJ],styles:[""]}),i})();function Y(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e._UZ(5,"br"),e._uU(6),e._UZ(7,"br"),e._uU(8),e._UZ(9,"br"),e._uU(10),e._UZ(11,"br"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA(),e.TgZ(17,"td"),e._uU(18),e._UZ(19,"br"),e._uU(20),e._UZ(21,"br"),e._uU(22),e.qZA(),e.TgZ(23,"td"),e._uU(24),e.qZA(),e.TgZ(25,"td"),e.TgZ(26,"button",4),e.NdJ("click",function(){const s=e.CHM(t).index;return e.oxw().removeOrder(s)}),e._UZ(27,"i",5),e.qZA(),e._uU(28," \xa0 "),e.qZA(),e.qZA()}if(2&i){const t=o.$implicit,n=o.index;e.xp6(2),e.Oqu(n+1),e.xp6(2),e.hij(" Division: ",t.DivisionName," "),e.xp6(2),e.hij(" Category: ",t.Implement," "),e.xp6(2),e.hij(" Manufacturer: ",t.Make," "),e.xp6(2),e.hij(" Model/Item: ",t.Model," "),e.xp6(2),e.hij(" Unit of Msr.: ",t.UnitOfMeasurement," "),e.xp6(2),e.Oqu(t.Quantity),e.xp6(2),e.hij("",t.PurchaseTaxableValue," "),e.xp6(2),e.hij(" Taxable Value: ",t.TotalPurchaseTaxableValue," "),e.xp6(2),e.hij(" CGST: ",t.TotalPurchaseCGST," "),e.xp6(2),e.hij(" SGST: ",t.TotalPurchaseSGST," "),e.xp6(2),e.Oqu(t.TotalPurchaseInvoiceValue)}}let z=(()=>{class i{constructor(){this.orderList=new r.Oe([]),this.removeOrder=t=>{this.orderList.value.splice(t,1)}}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-order-list"]],inputs:{orderList:"orderList"},decls:21,vars:1,consts:[[1,"table-responsive","fixed-height-table"],[1,"table","table-striped","table-bordered","table-hover",2,"text-align","left"],["scope","col"],[4,"ngFor","ngForOf"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"fa","fa-trash"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"table",1),e._UZ(2,"caption"),e.TgZ(3,"thead"),e.TgZ(4,"tr"),e.TgZ(5,"th",2),e._uU(6,"SL."),e.qZA(),e.TgZ(7,"th",2),e._uU(8,"Goods Details"),e.qZA(),e.TgZ(9,"th",2),e._uU(10,"Quantity"),e.qZA(),e.TgZ(11,"th",2),e._uU(12,"Rate per Unit"),e.qZA(),e.TgZ(13,"th",2),e._uU(14,"Tax"),e.qZA(),e.TgZ(15,"th",2),e._uU(16,"Invoice Value"),e.qZA(),e.TgZ(17,"th",2),e._uU(18,"Actions"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(19,"tbody"),e.YNc(20,Y,29,12,"tr",3),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(20),e.Q6J("ngForOf",n.orderList.value))},directives:[g.sg],styles:[""]}),i})();function B(i,o){if(1&i&&e._UZ(0,"app-order-list",7),2&i){const t=e.oxw();e.Q6J("orderList",t.orderList)}}let R=(()=>{class i{constructor(t){this.toastr=t,this.nonSubsidyData={},this.modelDetails={},this.orderList=new r.Oe([]),this.showPODetais=new e.vpe,this.customerDetails=new r.NI(""),this.vendorID=new r.NI(""),this.shwPurchaseOrderForNonSubsidy=()=>(0,c.mG)(this,void 0,void 0,function*(){this.orderList.value.length>0?this.showPODetais.emit({orderList:this.orderList.value,customerDetails:this.customerDetails.value,vendorID:this.vendorID.value}):this.toastr.error("Please add munimum 1 Item/Model to Initiate P.O.")}),this.calculateItemWiseTax=()=>{const n=this.nonSubsidyData.Quantity?this.nonSubsidyData.Quantity:1;this.modelDetails.TotalPurchaseTaxableValue=this.modelDetails.PurchaseTaxableValue*n,this.modelDetails.TotalPurchaseCGST=this.modelDetails.PurchaseCGST*n,this.modelDetails.TotalPurchaseSGST=this.modelDetails.PurchaseCGST*n,this.modelDetails.TotalPurchaseInvoiceValue=this.modelDetails.PurchaseInvoiceValue*n}}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(_._W))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-non-subsidies-orders"]],outputs:{showPODetais:"showPODetais"},decls:14,vars:4,consts:[[1,"mybox"],[1,"mybox-header"],[1,"middle"],[3,"orderList","customerDetails","vendorID"],[3,"orderList",4,"ngIf"],[2,"width","100","text-align","center"],[1,"btn","btn-lg","btn-info","round",3,"click"],[3,"orderList"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"span"),e.TgZ(3,"strong"),e.TgZ(4,"label"),e._uU(5,"Enter Purchase Order(P.O.) Details"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",2),e._UZ(7,"app-order-entry-form",3),e._UZ(8,"br"),e.YNc(9,B,1,1,"app-order-list",4),e.TgZ(10,"div",5),e.TgZ(11,"button",6),e.NdJ("click",function(){return n.shwPurchaseOrderForNonSubsidy()}),e._uU(12," Initiate P.O."),e.qZA(),e.qZA(),e._UZ(13,"br"),e.qZA(),e.qZA()),2&t&&(e.xp6(7),e.Q6J("orderList",n.orderList)("customerDetails",n.customerDetails)("vendorID",n.vendorID),e.xp6(2),e.Q6J("ngIf",n.orderList.value.length>0))},directives:[E,g.O5,z],styles:[".col-lg-6[_ngcontent-%COMP%]{margin-bottom:2%}"]}),i})();var j=d(8065);function $(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"app-search-box",6),e.NdJ("changeFinYear",function(a){return e.CHM(t),e.oxw().changeFinancialYear(a)}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("POType",t.POType)}}function H(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"app-subsidies-orders",7),e.NdJ("showPODetais",function(a){return e.CHM(t),e.oxw().showSinglePO(a)}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("financialYear",t.financialYear)}}function K(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"app-non-subsidies-orders",8),e.NdJ("showPODetais",function(a){return e.CHM(t),e.oxw().showSinglePO(a)}),e.qZA()}}function W(i,o){1&i&&e._UZ(0,"div",9)}function X(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"button",10),e.NdJ("click",function(){return e.CHM(t),e.oxw().back()}),e._UZ(2,"i",11),e._uU(3," Back"),e.qZA(),e.TgZ(4,"div",12),e.TgZ(5,"div",13),e.TgZ(6,"span"),e.TgZ(7,"strong"),e.TgZ(8,"label"),e._uU(9,"Purchase Order"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"div"),e._UZ(11,"app-po",14),e.TgZ(12,"div",15),e.TgZ(13,"button",16),e.NdJ("click",function(){return e.CHM(t),e.oxw().back()}),e._UZ(14,"i",11),e._uU(15," Back"),e.qZA(),e.TgZ(16,"button",17),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return a.indentGenerated(),a.clicked=!0}),e._uU(17,"Send Approval "),e._UZ(18,"i",18),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(11),e.Q6J("PODetails",t.PODetails)("PONo",t.PONo),e.xp6(5),e.Q6J("disabled",t.clicked)}}const ee=[{path:"",component:(()=>{class i{constructor(t,n,a){this.layoutService=t,this.service=n,this.toastr=a,this.POType=new r.NI("NonSubsidy"),this.financialYear=new r.NI(""),this.PONo=new r.NI(""),this.first_card=!0,this.VendorID="",this.PODetails={},this.accountantDetails={},this.DMDetails={},this.clicked=!1,this.allList=[],this.showGIlist=!1,this.loadingData=!1,this.allData=[],this.loadFirstDetails=()=>(0,c.mG)(this,void 0,void 0,function*(){this.accountantDetails=yield this.service.get("/accountant/getAccName"),this.DMDetails=yield this.service.get("/accountant/getDMDetails")}),this.indentGenerated=()=>(0,c.mG)(this,void 0,void 0,function*(){this.addSubsidyIndent()}),this.addSubsidyIndent=()=>(0,c.mG)(this,void 0,void 0,function*(){try{let s=yield this.service.post("/accountant/addIndent",this.PODetails.orderList);this.PONo.setValue(s.PONo),this.toastr.success("Successfully P.O. Approval send to DM",`PONo: ${this.PONo.value}`),this.showGIlist=!1,this.first_card=!0}catch(s){this.toastr.error("Failed To Initiate P.O. Try Again!!"),console.error(s)}finally{this.clicked=!1}}),this.back=()=>{this.showGIlist=!1,this.first_card=!0},this.showSinglePO=s=>(0,c.mG)(this,void 0,void 0,function*(){this.PONo.setValue(""),this.PODetails.orderList=s.orderList,this.PODetails.customerDetails=s.customerDetails,this.PODetails.purchasOrderType=this.purchasOrderType;const l=this.PODetails.orderList.reduce((u,f)=>u+f.TotalInvoiceValue,0);this.PODetails.vendorDetails=yield this.service.get("/accountant/getDelearDetails?VendorID="+s.vendorID),this.PODetails.accountantDetails=this.accountantDetails,this.PODetails.DMDetails=this.DMDetails,this.showGIlist=!0,this.first_card=!1;const h=this.PODetails.orderList.length;this.PODetails.orderList.forEach(u=>{u.POAmount=l,u.POType=this.purchasOrderType,u.NoOfItemsInPO=h,u.ItemQuantity=u.Quantity,u.CustomerID="Subsidy"==this.purchasOrderType?u.permit_no:u.CustomerID,u.CustomerOrderRefence=u.orderReference})}),this.layoutService.setBreadcrumb("Purchase Order / Initiate"),this.loadFirstDetails()}ngOnInit(){}changeFinancialYear(t){this.fin_year=t}get purchasOrderType(){return this.POType.value}get fin_year(){return this.financialYear.value}set fin_year(t){this.financialYear.setValue(t)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(T.P),e.Y36(D.v),e.Y36(_._W))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-initiate"]],decls:6,vars:5,consts:[[3,"POType","changeFinYear",4,"ngIf"],[3,"financialYear","showPODetais",4,"ngIf"],[3,"showPODetais",4,"ngIf"],[1,"loader"],["class","spinner-border text-info",4,"ngIf"],[4,"ngIf"],[3,"POType","changeFinYear"],[3,"financialYear","showPODetais"],[3,"showPODetais"],[1,"spinner-border","text-info"],[1,"btn","btn-info","btn-sm","topBack",3,"click"],["aria-hidden","true",1,"fas","fa-arrow-left"],[1,"mybox"],[1,"mybox-header"],["id","printPage",3,"PODetails","PONo"],[1,"bottomBack"],[1,"btn","btn-info","btn-sm",3,"click"],[1,"btn","btn-info","btn-sm",3,"disabled","click"],["aria-hidden","true",1,"fas","fa-send"]],template:function(t,n){1&t&&(e.YNc(0,$,1,1,"app-search-box",0),e.YNc(1,H,1,1,"app-subsidies-orders",1),e.YNc(2,K,1,0,"app-non-subsidies-orders",2),e.TgZ(3,"div",3),e.YNc(4,W,1,0,"div",4),e.qZA(),e.YNc(5,X,19,3,"div",5)),2&t&&(e.Q6J("ngIf",n.first_card),e.xp6(1),e.Q6J("ngIf",n.first_card&&"Subsidy"==n.purchasOrderType),e.xp6(1),e.Q6J("ngIf",n.first_card&&"NonSubsidy"==n.purchasOrderType),e.xp6(2),e.Q6J("ngIf",n.loadingData),e.xp6(1),e.Q6J("ngIf",n.showGIlist))},directives:[g.O5,b,U,R,j.K],styles:[""]}),i})()}];let te=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[m.Bz.forChild(ee)],m.Bz]}),i})();var ie=d(4466),ne=d(7335);let ae=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[g.ez,te,ie.m,r.u5,r.UX,ne.J,Z.K]]}),i})()},1410:(y,p,d)=>{d.d(p,{G:()=>g});var Z=d(639);let g=(()=>{class m{transform(r,e){return r?e?(e=e.toLowerCase(),r.filter(function(T){return JSON.stringify(T).toLowerCase().includes(e)})):r:null}}return m.\u0275fac=function(r){return new(r||m)},m.\u0275pipe=Z.Yjl({name:"search",type:m,pure:!0}),m})()}}]);