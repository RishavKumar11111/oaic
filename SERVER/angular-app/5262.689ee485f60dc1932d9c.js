"use strict";(self.webpackChunkangular_application=self.webpackChunkangular_application||[]).push([[5262],{5262:(L,h,a)=>{a.r(h),a.d(h,{PartlyMoneyReceiveModule:()=>B});var d=a(665),_=a(8583),m=a(4762),e=a(639),g=a(4495),v=a(5620),Z=a(9344),f=a(1879),T=a(5652),u=a(5913),A=a(2251),x=a(4959),M=a(1410);const C=["printMR"];function q(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",5),e.TgZ(1,"div",6),e.TgZ(2,"span"),e.TgZ(3,"strong"),e.TgZ(4,"label"),e._uU(5,"Receive Farmer Pending Money"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",7),e.TgZ(7,"div",8),e.TgZ(8,"div",9),e.TgZ(9,"app-financial-year",10),e.NdJ("newItemEvent",function(o){return e.CHM(t),e.oxw().changeFinancialYear(o)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}}function P(i,s){1&i&&e._UZ(0,"div",11)}function R(i,s){if(1&i&&(e.TgZ(0,"div",21),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" No pending payment found on financial year ",t.fin_year,". ")}}function k(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e._UZ(7,"br"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.ALo(17,"number"),e.qZA(),e.TgZ(18,"td"),e._uU(19),e.ALo(20,"number"),e.qZA(),e.TgZ(21,"td"),e._uU(22),e.ALo(23,"number"),e.qZA(),e.TgZ(24,"td",28),e.TgZ(25,"button",29),e.NdJ("click",function(){const c=e.CHM(t).$implicit;return e.oxw(3).payDetails(c)}),e._uU(26,"Receive"),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=s.$implicit,r=s.index;e.xp6(2),e.Oqu(r+1),e.xp6(2),e.Oqu(t.permit_no),e.xp6(2),e.hij("",t.farmer_name," "),e.xp6(2),e.hij(" ( ",t.farmer_id," ) "),e.xp6(2),e.Oqu(t.implement),e.xp6(2),e.Oqu(t.make),e.xp6(2),e.Oqu(t.model),e.xp6(2),e.Oqu(e.xi3(17,10,t.FullCost,"1.2-2")),e.xp6(3),e.Oqu(e.xi3(20,13,t.paid_amount,"1.2-2")),e.xp6(3),e.Oqu(e.xi3(23,16,t.PendingCost,"1.2-2"))}}function D(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"div",22),e.TgZ(2,"table",23),e._UZ(3,"caption"),e.TgZ(4,"thead"),e.TgZ(5,"tr"),e.TgZ(6,"th",24),e._uU(7,"SL."),e.qZA(),e.TgZ(8,"th",25),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).sortedOrderOfColumn("permit_no")}),e._uU(9,"Permit no."),e.qZA(),e.TgZ(10,"th",25),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).sortedOrderOfColumn("farmer_name")}),e._uU(11,"Farmer name(ID)"),e.qZA(),e.TgZ(12,"th",25),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).sortedOrderOfColumn("implement")}),e._uU(13,"Product Category"),e.qZA(),e.TgZ(14,"th",25),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).sortedOrderOfColumn("make")}),e._uU(15,"Manufacturer"),e.qZA(),e.TgZ(16,"th",25),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).sortedOrderOfColumn("model")}),e._uU(17,"Model/Item"),e.qZA(),e.TgZ(18,"th",25),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).sortedOrderOfColumn("ammount")}),e._uU(19,"Full amount(\u20b9) "),e.qZA(),e.TgZ(20,"th",25),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).sortedOrderOfColumn("paid_amount")}),e._uU(21,"Paid amount(\u20b9) "),e.qZA(),e.TgZ(22,"th",25),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).sortedOrderOfColumn("paid_amount")}),e._uU(23,"Pending amount(\u20b9) "),e.qZA(),e.TgZ(24,"th",26),e._uU(25,"Action"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(26,"tbody"),e.YNc(27,k,27,19,"tr",27),e.ALo(28,"search"),e.ALo(29,"search"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(27),e.Q6J("ngForOf",e.xi3(28,1,e.xi3(29,4,t.allOrders,t.search_permit_no),t.search_farmer_name))}}function b(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",5),e.TgZ(1,"div",6),e.TgZ(2,"div",8),e.TgZ(3,"div",12),e.TgZ(4,"div",13),e.TgZ(5,"div",14),e.TgZ(6,"span",15),e._UZ(7,"i",16),e.qZA(),e.qZA(),e.TgZ(8,"input",17),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().search_farmer_name=o}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",18),e.TgZ(10,"strong"),e.TgZ(11,"label"),e._uU(12,"ORDERS"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"div",12),e.TgZ(14,"div",13),e.TgZ(15,"div",14),e.TgZ(16,"span",15),e._UZ(17,"i",16),e.qZA(),e.qZA(),e.TgZ(18,"input",19),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().search_permit_no=o}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(19,"div"),e.YNc(20,R,2,1,"div",20),e.YNc(21,D,30,7,"div",3),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(8),e.Q6J("ngModel",t.search_farmer_name),e.xp6(10),e.Q6J("ngModel",t.search_permit_no),e.xp6(2),e.Q6J("ngIf",0==t.allOrders.length),e.xp6(1),e.Q6J("ngIf",0!=t.allOrders.length)}}function O(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"button",30),e.NdJ("click",function(){return e.CHM(t),e.oxw().back()}),e._UZ(2,"i",31),e.qZA(),e.TgZ(3,"div",5),e.TgZ(4,"div",6),e.TgZ(5,"span"),e.TgZ(6,"strong"),e.TgZ(7,"label"),e._uU(8,"MONEY RECEIPT"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div"),e._UZ(10,"app-farmer-money-receipt",32),e.TgZ(11,"div",33),e.TgZ(12,"button",34),e.NdJ("click",function(){return e.CHM(t),e.oxw().back()}),e._UZ(13,"i",31),e._uU(14," Back"),e.qZA(),e.TgZ(15,"button",34),e.NdJ("click",function(){return e.CHM(t),e.oxw().proceedPay()}),e._uU(16,"Confirm & Print"),e.qZA(),e._UZ(17,"button",35,36),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(10),e.Q6J("data",t.data),e.xp6(7),e.Q6J("useExistingCss",!0)}}function F(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",37),e.TgZ(1,"div",38),e.TgZ(2,"div",39),e.TgZ(3,"div",40),e.TgZ(4,"div",41),e.TgZ(5,"h4",42),e._uU(6,"Receive"),e.qZA(),e.TgZ(7,"button",43),e._uU(8,"\xd7"),e.qZA(),e.qZA(),e.TgZ(9,"div",44),e._UZ(10,"app-view-permit-details",45),e._UZ(11,"app-enter-receipt-details",46),e.qZA(),e.TgZ(12,"div",47),e.TgZ(13,"button",48),e.NdJ("click",function(){return e.CHM(t),e.oxw().showReceipt()}),e._uU(14,"Proceed "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(10),e.Q6J("order",t.order),e.xp6(1),e.Q6J("receiptDetailsForm",t.receiptDetailsForm)}}let U=(()=>{class i{constructor(t,r,o,c){this.layoutService=t,this.service=r,this.toastr=o,this.fb=c,this.secondPage=!1,this.showData=!1,this.printPage=!1,this.enterPaymentNo=!1,this.first_card=!0,this.fin_year="",this.data={},this.acc_name="",this.allOrders=[],this.order={},this.search_farmer_name="",this.search_permit_no="",this.loadFirstRequireedDetails=()=>(0,m.mG)(this,void 0,void 0,function*(){const n=yield this.service.get("/accountant/getAccName");this.acc_name=n.acc_name}),this.loadOrders=()=>(0,m.mG)(this,void 0,void 0,function*(){this.loadingData=!0,this.showData=!1;let n=yield this.service.get("/accountant/getPendingPaymentOrders?dist_id="+this.dist_id+"&fin_year="+this.fin_year);this.allOrders=n,this.loadingData=!1,this.showData=!0}),this.payDetails=n=>{var l;this.order=n,this.order.PERMIT_ORDER=n.permit_no,this.order.FARMER_ID=n.farmer_id,this.order.VCHFARMERNAME=n.farmer_name,this.order.VCHFATHERNAME=n.farmer_father_name,this.order.Dist_Name=n.dist_name,this.order.block_name=n.block_name,this.order.vch_GPName=n.gp_name,this.order.vch_VillageName=n.village_name,this.order.DT_PERMIT=n.permit_validity,this.order.DT_P_VALIDITY=n.permit_issue_date,this.order.Implement=n.implement,this.order.Make=n.make,this.order.Model=n.model,this.order.SUB_AMNT=n.ammount,this.order.FULL_COST=n.FullCost,this.amount_pay_now=parseFloat(n.PendingCost),null===(l=this.receiptDetailsForm.get("paymentReceived"))||void 0===l||l.setValue(this.amount_pay_now),this.setEmptyAllFields(),this.secondPage=!0},this.showReceipt=()=>{this.amount_pay_now=this.receiptDetailsForm.value.paymentReceived,this.payment_type=this.receiptDetailsForm.value.paymentType,this.payment_no=this.receiptDetailsForm.value.paymentNo,this.payment_date=this.receiptDetailsForm.value.paymentDate,this.source_bank=this.receiptDetailsForm.value.sourceBank,this.other_bank_name=this.receiptDetailsForm.value.otherBankName,this.remark=this.receiptDetailsForm.value.remark,this.amount_pay_now>this.order.PendingCost?this.toastr.error("Pending Cost Exceed. Enter valid cost."):(this.data.date=this.cDate,this.data.office=this.order.Dist_Name,this.data.farmer_name=this.order.farmer_name,this.data.farmer_id=this.order.farmer_id,this.data.full_ammount=this.amount_pay_now,this.data.permit_no=this.order.permit_no,this.data.implement=this.order.implement,this.data.payment_mode=this.payment_type,this.data.payment_date=this.payment_date,this.data.source_bank=this.source_bank,this.data.acc_name=this.acc_name,this.showData=!1,this.printPage=!0,this.first_card=!1,this.secondPage=!0,"other_bank"==this.source_bank&&(this.source_bank=this.other_bank_name))},this.proceedPay=()=>(0,m.mG)(this,void 0,void 0,function*(){try{this.loadingData=!0;const Y={paymentDetails:{reference_no:this.order.permit_no,permit_no:this.order.permit_no,payment_type:this.payment_type,amount:this.amount_pay_now,payby:this.userid,farmer_id:this.order.farmer_id,dist_id:this.dist_id,payment_no:this.payment_no,remark:this.remark,payment_date:this.payment_date},orderDetails:{selling_price:this.order.FullCost,paid_amount:this.order.paid_amount,amount_pay_now:this.amount_pay_now},receiptDetails:{receipt_no:this.receipt_no,office:this.order.dist_name,farmer_name:this.order.farmer_name,farmer_id:this.order.farmer_id,full_ammount:this.amount_pay_now,permit_no:this.order.permit_no,implement:this.order.implement,dist_id:this.dist_id,payment_mode:this.payment_type,source_bank:this.source_bank,payment_no:this.payment_no,payment_date:this.payment_date}},p=yield this.service.post("/accountant/updateFarmerPendingPayment",Y);""!=p?(this.receipt_no=p.receipt_no,this.data.receipt_no=p.receipt_no,this.loadingData=!1,this.loadOrders(),setTimeout(()=>{this.printMR.nativeElement.click(),this.printPage=!1}),this.setEmptyAllFields()):(this.toastr.error("Transaction Failed Try Again!!!!!!"),this.loadingData=!1)}catch(n){console.log(n),this.toastr.error(n.error.error.message,n.statusText)}}),this.setEmptyAllFields=()=>{this.amount_pay_now="",this.payment_no="",this.source_bank="",this.remark="",this.payment_type="",this.payment_date=""},this.back=()=>{this.showData=!0,this.printPage=!1,this.first_card=!0},this.sortedOrderOfColumn=n=>{this.orderBy=n},this.layoutService.setBreadcrumb("Money Receipt / Partly Receive"),this.dist_id=t.getDistrictID(),this.userid=t.getUserID(),this.cDate=t.getCurrentDate(),this.loadFirstRequireedDetails(),this.receiptDetailsForm=this.fb.group({paymentReceived:["",[d.kI.required]],paymentType:["DD",[d.kI.required]],paymentNo:["",[d.kI.required]],paymentDate:["",[d.kI.required]],sourceBank:["",[d.kI.required]],otherBankName:["",[d.kI.required]],remark:["",[d.kI.required]]})}ngOnInit(){}changeFinancialYear(t){this.fin_year=t,this.loadOrders()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.P),e.Y36(v.v),e.Y36(Z._W),e.Y36(d.qu))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-partly-money-receive"]],viewQuery:function(t,r){if(1&t&&e.Gf(C,5),2&t){let o;e.iGM(o=e.CRH())&&(r.printMR=o.first)}},decls:6,vars:5,consts:[["class","mybox",4,"ngIf"],[1,"loader"],["class","spinner-border text-info",4,"ngIf"],[4,"ngIf"],["class","container",4,"ngIf"],[1,"mybox"],[1,"mybox-header"],[1,"middle"],[1,"row"],[1,"col-lg-4"],[3,"newItemEvent"],[1,"spinner-border","text-info"],[1,"col-3"],[1,"input-group","mb-3","input-group-sm"],[1,"input-group-prepend"],[1,"input-group-text"],["aria-hidden","true",1,"fas","fa-search"],["type","text","placeholder","Enter farmer name",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-6"],["type","text","placeholder","Enter permit no.",1,"form-control",3,"ngModel","ngModelChange"],["class","no-record",4,"ngIf"],[1,"no-record"],[1,"table-responsive"],["id","orderListTable",1,"table","table-striped","table-bordered","table-hover","text-left"],["scope","col"],["scope","col",3,"click"],["scope","col",2,"text-align","center"],[4,"ngFor","ngForOf"],[2,"width","13%"],["data-toggle","modal","data-target","#payHere",1,"btn","btn-outline-info","round",3,"click"],[1,"btn","btn-info","btn-sm","topBack",3,"click"],["aria-hidden","true",1,"fas","fa-arrow-left"],["id","printPage",3,"data"],[1,"bottomBack"],[1,"btn","btn-info","btn-sm",3,"click"],["hidden","true","printTitle","Money Receipt","printSectionId","printPage","ngxPrint","",3,"useExistingCss"],["printMR",""],[1,"container"],["id","payHere",1,"modal","fade"],[1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title","center"],["type","button","data-dismiss","modal",1,"close"],[1,"modal-body"],[3,"order"],[3,"receiptDetailsForm"],[1,"modal-footer"],["data-dismiss","modal","type","submit",1,"btn","btn-outline-info","round",3,"click"]],template:function(t,r){1&t&&(e.YNc(0,q,10,0,"div",0),e.TgZ(1,"div",1),e.YNc(2,P,1,0,"div",2),e.qZA(),e.YNc(3,b,22,4,"div",0),e.YNc(4,O,19,2,"div",3),e.YNc(5,F,15,2,"div",4)),2&t&&(e.Q6J("ngIf",r.first_card),e.xp6(2),e.Q6J("ngIf",r.loadingData),e.xp6(1),e.Q6J("ngIf",r.showData),e.xp6(1),e.Q6J("ngIf",r.printPage),e.xp6(1),e.Q6J("ngIf",r.secondPage))},directives:[_.O5,f.L,d.Fj,d.JJ,d.On,_.sg,T.i,u.I,A.a,x.b],pipes:[M.G,_.JJ],styles:[".row[_ngcontent-%COMP%]{margin-bottom:3px!important}"]}),i})();var y=a(6901);const N=[{path:"",component:U}];let w=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[y.Bz.forChild(N)],y.Bz]}),i})();var I=a(4466),J=a(3851),E=a(9986),H=a(1238);let B=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[_.ez,w,d.u5,I.m,u.K,J.$,E.z,H.D]]}),i})()}}]);